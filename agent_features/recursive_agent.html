<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Recursive Agent ‚Äì Lasagna AI: Documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../agent_features/caching.html" rel="next">
<link href="../agent_features/parallelizing.html" rel="prev">
<link href="../assets/Lasagna AI - Logo - Square - SMOOSHED.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-83ff3a71db0ec49e2591a4ae8a620606.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="Recursive Agent ‚Äì Lasagna AI: Documentation">
<meta property="og:description" content="">
<meta property="og:site_name" content="Lasagna AI: Documentation">
</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../assets/Lasagna AI - Logo - Square - SMOOSHED.png" alt="" class="navbar-logo light-content">
    <img src="../assets/Lasagna AI - Logo - Square - SMOOSHED.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Lasagna AI: Documentation</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../quickstart.html" aria-current="page"> 
<span class="menu-text">üöÄ Quickstart</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">üí° About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Rhobota/lasagna-ai" target="_blank"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../agent_features/tools.html">‚öôÔ∏è Agent Features</a></li><li class="breadcrumb-item"><a href="../agent_features/recursive_agent.html">Recursive Agent</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
  <div id="quarto-announcement" data-announcement-id="81bf19ec54dba8e7699631843dfb8729" class="alert alert-primary hidden"><i class="bi bi-emoji-smile quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p>You found <strong>Lasagna AI</strong>!</p>
</div></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../installing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üì° Install Lasagna AI</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quickstart.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üöÄ Quickstart</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">‚ù§Ô∏è Why Lasagna AI?</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../why_lasagna_ai/lasagna_vs_langchain.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lasagna vs LangChain</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../why_lasagna_ai/lasagna_vs_llamaindex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lasagna vs LlamaIndex</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">ü§ñ What is an Agent?</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../what_is_an_agent/agent.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Lasagna Agent</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../what_is_an_agent/type_agentrun.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The <code>AgentRun</code> type</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">‚öôÔ∏è Agent Features</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../agent_features/tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tool Use</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../agent_features/structured_output.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structured Output</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../agent_features/layering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Layered (multi-agent) Systems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../agent_features/parallelizing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parallelizing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../agent_features/recursive_agent.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Recursive Agent</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../agent_features/caching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Caching Decorator</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../agent_features/functional_agents.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functional Agents</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">üòã Recipes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recipes/rag.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RAG Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recipes/internet_research.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Internet Research Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recipes/sms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Twilio SMS Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recipes/agents_as_tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Agents as Tools Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recipes/routing_agent.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Agent Routing Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recipes/committee.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Committee Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recipes/vision.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vision Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recipes/swapping_providers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model-swap Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recipes/delegating_subtasks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Delegation Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recipes/parallelize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parallelization Example</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">üîå Model Providers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../providers/openai.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">OpenAI Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../providers/anthropic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anthropic Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../providers/aws_bedrock.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AWS Bedrock Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../providers/ollama.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ollama Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../providers/nvidia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NVIDIA NIM/NGC Models</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">‚òÅÔ∏è How to Deploy</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../deployment/streaming_and_events.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Streaming &amp; Events</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../deployment/database.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Database Management</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">ü§î Misc Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/python_asyncio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to Python Asyncio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/python_type_hints.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to Python Type Hints</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/functional_programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functional Programming</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üí° About</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#example-recursive-plot-outline-builder" id="toc-example-recursive-plot-outline-builder" class="nav-link active" data-scroll-target="#example-recursive-plot-outline-builder">Example: Recursive Plot Outline Builder</a>
  <ul class="collapse">
  <li><a href="#system-prompt" id="toc-system-prompt" class="nav-link" data-scroll-target="#system-prompt">System Prompt</a></li>
  <li><a href="#data-models" id="toc-data-models" class="nav-link" data-scroll-target="#data-models">Data Models</a></li>
  <li><a href="#the-recursive-agent" id="toc-the-recursive-agent" class="nav-link" data-scroll-target="#the-recursive-agent">The Recursive Agent</a></li>
  <li><a href="#utility-functions" id="toc-utility-functions" class="nav-link" data-scroll-target="#utility-functions">Utility Functions</a></li>
  <li><a href="#driver" id="toc-driver" class="nav-link" data-scroll-target="#driver">Driver</a></li>
  <li><a href="#example-execution" id="toc-example-execution" class="nav-link" data-scroll-target="#example-execution">Example Execution</a></li>
  </ul></li>
  <li><a href="#other-references" id="toc-other-references" class="nav-link" data-scroll-target="#other-references">Other References</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.dev/Rhobota/lasagna-ai/blob/main/docs/agent_features/recursive_agent.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/Rhobota/lasagna-ai/blob/main/docs/agent_features/recursive_agent.ipynb" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/Rhobota/lasagna-ai/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../agent_features/tools.html">‚öôÔ∏è Agent Features</a></li><li class="breadcrumb-item"><a href="../agent_features/recursive_agent.html">Recursive Agent</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Recursive Agent</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Ever wanted a recursive agent? Now you can have one! ü§Ø</p>
<div id="d0f90b80-ebc5-49ae-acc7-5d6a9991b296" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This page will use the following imports:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> __future__ <span class="im">import</span> annotations</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lasagna <span class="im">import</span> Model, EventCallback, AgentRun, Message</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lasagna <span class="im">import</span> (</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    override_system_prompt,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    extraction,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    chained_runs,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    to_str,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    make_model_binder,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    noop_callback,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lasagna <span class="im">import</span> known_models</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel, Field</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> io</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> copy</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> redirect_stdout</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We need to set up our ‚Äúbinder‚Äù (see the <a href="../quickstart.html">quickstart guide</a> for what this is).</p>
<div id="711e189e-f17c-4678-bac1-bfb69f41d8c6" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>load_dotenv()</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> os.environ.get(<span class="st">'OLLAMA'</span>):</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    model_name <span class="op">=</span> os.environ[<span class="st">'OLLAMA'</span>]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Using Ollama model:'</span>, model_name)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    BINDER <span class="op">=</span> make_model_binder(<span class="st">'ollama'</span>, model_name)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> os.environ.get(<span class="st">'ANTHROPIC_API_KEY'</span>):</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Using Anthropic'</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    BINDER <span class="op">=</span> known_models.anthropic_claude_haiku_4_5_binder</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> os.environ.get(<span class="st">'OPENAI_API_KEY'</span>):</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Using OpenAI'</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    BINDER <span class="op">=</span> known_models.openai_gpt_5_mini_binder</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> <span class="va">False</span>, <span class="st">"Neither OLLAMA nor ANTHROPIC_API_KEY nor OPENAI_API_KEY is set! We need at least one to do this demo."</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Using Anthropic</code></pre>
</div>
</div>
<p>Ensure the recursion doesn‚Äôt go forever!</p>
<div id="f9f4acd1-2f6a-4144-a995-275ecb0f5082" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>MAX_DEPTH <span class="op">=</span> <span class="bu">int</span>(os.environ.get(<span class="st">'MAX_DEPTH'</span>, <span class="st">'3'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="example-recursive-plot-outline-builder" class="level2">
<h2 class="anchored" data-anchor-id="example-recursive-plot-outline-builder">Example: Recursive Plot Outline Builder</h2>
<p>Let‚Äôs write a recursive agent that builds a plot outline. It will recursively add detail to the plot outline until it is sufficiently detailed (or until the <code>MAX_DEPTH</code> is reached).</p>
<section id="system-prompt" class="level3">
<h3 class="anchored" data-anchor-id="system-prompt">System Prompt</h3>
<div id="3472b27c-b296-4a47-b186-529298fa3ff7" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>SYSTEM_PROMPT <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="st">You expand the plot outline to add detail, nuance, and time-tested</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">story-telling techniques.</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="st">You will be given a plot outline, and you will be instructed to expand</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="st">**one** part of it. Your output should be the expansion of that **single**</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">part.</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span>.strip()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="data-models" class="level3">
<h3 class="anchored" data-anchor-id="data-models">Data Models</h3>
<p>The following data model will be used to <em>extract</em> (i.e.&nbsp;generate structured output) plot revisions at each step in the recursive process:</p>
<div id="f9303cf6-1fbd-4c01-811b-d1c43ff5f98a" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PlotRevision(BaseModel):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    thoughts: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"your free-form thoughts about the entire plot and about the part you are asked to expand, and then brainstorm ideas for how it can be modified or expanded"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    revised_plot_point: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"output a revised plot point that will **replace** the plot point you were instructed to expand; you may, if you choose, output the **same** plot point verbatim if it does not need modification"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    has_sufficient_detail: <span class="bu">bool</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"`true` if this plot point has sufficient detail to easily write the script from it; else `false` if this plot point needs to have further expounding; if `false`, then fill in `sub_plot_points` with the sub-plot points to add detail"</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    sub_plot_points: <span class="bu">list</span>[<span class="bu">str</span>] <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"output a chronological list of sub-plot points; these are details about the `revised_plot_point` to add detail, nuance, and time-tested story-telling techniques; output an empty list if `has_sufficient_detail` is `true`"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>The following data model will be used to hold the <em>full</em> plot (capturing everything generated up to this point). Note: It does not need prompts since it will <em>not</em> be used for extraction by AI models.</p>
<div id="e5706beb-26d6-41be-bfe7-16ccfa1d7a7f" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> FullPlotPoint(BaseModel):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    plot_point: <span class="bu">str</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    sub_plot_points: <span class="bu">list</span>[FullPlotPoint]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="the-recursive-agent" class="level3">
<h3 class="anchored" data-anchor-id="the-recursive-agent">The Recursive Agent</h3>
<p>Now, the recursive agent! See comments below for details, but the high level is that it:</p>
<ol type="1">
<li>generates a prompt to extract a <code>PlotRevision</code>,</li>
<li>patches the current <code>FullPlotPoint</code> using that <code>PlotRevision</code>, and</li>
<li>for each generated subplot, recurses to continue filling in lower-level detail.</li>
</ol>
<div id="adae9335-8903-437c-9187-5f6176dd2db5" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="at">@BINDER</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> plot_builder(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    model: Model,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    event_callback: EventCallback,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    prev_runs: <span class="bu">list</span>[AgentRun],</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> AgentRun:</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Capture all the generated output:</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    output_runs: <span class="bu">list</span>[AgentRun] <span class="op">=</span> []</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Build the extraction input:</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">len</span>(prev_runs) <span class="op">==</span> <span class="dv">2</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    plot_agentrun <span class="op">=</span> prev_runs[<span class="dv">0</span>]</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> plot_agentrun[<span class="st">'type'</span>] <span class="op">==</span> <span class="st">'extraction'</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    full_plot <span class="op">=</span> copy.deepcopy(plot_agentrun[<span class="st">'result'</span>])   <span class="co"># COPYING IS IMPORTANT HERE! WE MUST BE A PURE FUNCTION!</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">isinstance</span>(full_plot, FullPlotPoint)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    revise_indices_agentrun <span class="op">=</span> prev_runs[<span class="dv">1</span>]</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> revise_indices_agentrun[<span class="st">'type'</span>] <span class="op">==</span> <span class="st">'extraction'</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    revise_indices <span class="op">=</span> revise_indices_agentrun[<span class="st">'result'</span>]</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">isinstance</span>(revise_indices, <span class="bu">list</span>)</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    specific_point <span class="op">=</span> full_plot</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> index <span class="kw">in</span> revise_indices:</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> <span class="bu">isinstance</span>(index, <span class="bu">int</span>)</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>        specific_point <span class="op">=</span> specific_point.sub_plot_points[index]</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    messages_orig: <span class="bu">list</span>[Message] <span class="op">=</span> [</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>            <span class="st">'role'</span>: <span class="st">'human'</span>,</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">'text'</span>: <span class="ss">f'Given this plot outline: </span><span class="sc">{</span>full_plot<span class="sc">}</span><span class="ss">'</span>,</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>            <span class="st">'role'</span>: <span class="st">'human'</span>,</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">'text'</span>: <span class="ss">f'Revise this plot point: </span><span class="sc">{</span>specific_point<span class="sc">.</span>plot_point<span class="sc">}</span><span class="ss">'</span>,</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    messages_new_system_prompt <span class="op">=</span> override_system_prompt(messages_orig, SYSTEM_PROMPT)</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract (generate with structured output) the plot revision at this level:</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    extraction_message, extraction_result <span class="op">=</span> <span class="cf">await</span> model.extract(</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>        event_callback,</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>        messages <span class="op">=</span> messages_new_system_prompt,</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>        extraction_type <span class="op">=</span> PlotRevision,</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>    extraction_run <span class="op">=</span> extraction(<span class="st">'extraction_run'</span>, [extraction_message], extraction_result)</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>    output_runs.append(extraction_run)</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Patch the plot:</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>    specific_point.plot_point <span class="op">=</span> extraction_result.revised_plot_point</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>    specific_point.sub_plot_points <span class="op">=</span> [</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>        FullPlotPoint(</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>            plot_point <span class="op">=</span> point,</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>            sub_plot_points <span class="op">=</span> [],</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> point <span class="kw">in</span> extraction_result.sub_plot_points</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Can we afford to go deeper?</span></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>    can_go_deeper <span class="op">=</span> <span class="bu">len</span>(revise_indices) <span class="op">+</span> <span class="dv">1</span> <span class="op">&lt;</span> MAX_DEPTH</span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Recursively expand all the sub-plot points:</span></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> can_go_deeper <span class="kw">and</span> <span class="kw">not</span> extraction_result.has_sufficient_detail:</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>        subplot_runs: <span class="bu">list</span>[AgentRun] <span class="op">=</span> []</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i, _ <span class="kw">in</span> <span class="bu">enumerate</span>(extraction_result.sub_plot_points):</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>            subplot_input: <span class="bu">list</span>[AgentRun] <span class="op">=</span> [</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>                extraction(<span class="st">'plot_agentrun'</span>, [], full_plot),</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>                extraction(<span class="st">'revise_indices_agentrun'</span>, [], [<span class="op">*</span>revise_indices, i]),</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>            subplot_run <span class="op">=</span> <span class="cf">await</span> plot_builder(event_callback, subplot_input)</span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>            subplot_runs.append(subplot_run)</span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>        subplot_chain <span class="op">=</span> chained_runs(<span class="st">'subplot_chain'</span>, subplot_runs)</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>        output_runs.append(subplot_chain)</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return everything that we generated:</span></span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> chained_runs(<span class="st">'plot_builder'</span>, output_runs)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>A note about the <strong>INPUT</strong> to the agent
</div>
</div>
<div class="callout-body-container callout-body">
<p>Recall, we designed Lasagna so that <em>all</em> agents have the same signature; specifically, a core input to <em>all</em> Lasagna agents is <code>prev_runs: list[AgentRun]</code>. It represents the contextual input to the agent, and it often becomes (through whatever transformation the agent wishes to do) the <em>prompt</em> to the <code>model</code>.</p>
<p>Despite all agents having the same input <em>signature</em>, some agents will <em>expect</em> certain contents inside <code>prev_runs</code>. <strong>The agent above is one of those agents.</strong> You cannot call <code>plot_builder</code> with anything you want; rather, it expects its <code>prev_runs</code> input to be precisely what it needs (details not important - see the code for those details if you want).</p>
<p>So, therefore, the <em>caller</em> of <code>plot_builder</code> has to follow the contract it expects! Complicated agents might have to be this way, where they aren‚Äôt as ‚Äúswappable‚Äù as we‚Äôd like them to be, but alas. In this case, to make the recursion work, we have to assume strong structure in the input.</p>
<p><strong>Note within a note:</strong> Be pure! Lasagna agents, being functional-inspired, should be pure. Note how the agent above makes a copy; if it didn‚Äôt, it wouldn‚Äôt be pure, and the recursion logic would fail.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>A note about the <strong>OUTPUT</strong> of the agent
</div>
</div>
<div class="callout-body-container callout-body">
<p>Recall, the output of <em>all</em> agents in Lasagna is a single <code>AgentRun</code> object.</p>
<p>This output should represent <strong>as closely as possible</strong> the content that the agent <em>generated</em>. The output should be quite literal: ‚Äúthe agent generated this stuff in this order‚Äù. If you want to do some transformations of this (as we <em>will</em> do below), do it <em>outside</em> the agent (as we <em>will</em> do below).</p>
<p>Keeping the output <code>AgentRun</code> literal is important so that:</p>
<ol type="1">
<li>multiple downstream transformations can be done (maybe even some you haven‚Äôt thought of yet!),</li>
<li>you can track and debug agent output in its unaltered form, and</li>
<li>so that you can chain/stack/parallelize agents and the outputs will form together nicely (indeed, that is the reason <code>AgentRun</code> is the way that it is).</li>
</ol>
</div>
</div>
</section>
<section id="utility-functions" class="level3">
<h3 class="anchored" data-anchor-id="utility-functions">Utility Functions</h3>
<p>Here is a utility function to print the resulting plot outline using the final <code>AgentRun</code> returned by the agent above.</p>
<div id="069a54d5-a696-43ad-b632-9edd2f1e1b6e" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> print_plot(run: AgentRun, depth: <span class="bu">int</span> <span class="op">=</span> <span class="dv">0</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Prints the full plot outline, and returns the number of _extractions_ that were generated along the way. </span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> run[<span class="st">'agent'</span>] <span class="op">==</span> <span class="st">'plot_builder'</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> run[<span class="st">'type'</span>] <span class="op">==</span> <span class="st">'chain'</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    extraction_run <span class="op">=</span> run[<span class="st">'runs'</span>][<span class="dv">0</span>]</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> extraction_run[<span class="st">'agent'</span>] <span class="op">==</span> <span class="st">'extraction_run'</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> extraction_run[<span class="st">'type'</span>] <span class="op">==</span> <span class="st">'extraction'</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    plot_revision <span class="op">=</span> extraction_run[<span class="st">'result'</span>]</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">isinstance</span>(plot_revision, PlotRevision)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span><span class="st">' '</span> <span class="op">*</span> <span class="dv">2</span><span class="op">*</span>depth<span class="sc">}</span><span class="ss">- </span><span class="sc">{</span>plot_revision<span class="sc">.</span>revised_plot_point<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    sum_ <span class="op">=</span> <span class="dv">1</span>  <span class="co"># count _this_ run</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(run[<span class="st">'runs'</span>]) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        subplot_chain <span class="op">=</span> run[<span class="st">'runs'</span>][<span class="dv">1</span>]</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> subplot_chain[<span class="st">'agent'</span>] <span class="op">==</span> <span class="st">'subplot_chain'</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> subplot_chain[<span class="st">'type'</span>] <span class="op">==</span> <span class="st">'chain'</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> subplot_run <span class="kw">in</span> subplot_chain[<span class="st">'runs'</span>]:</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>            sum_ <span class="op">+=</span> print_plot(subplot_run, depth <span class="op">=</span> depth <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> leaf_plot_point <span class="kw">in</span> plot_revision.sub_plot_points:</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span><span class="st">' '</span> <span class="op">*</span> <span class="dv">2</span><span class="op">*</span>(depth<span class="op">+</span><span class="dv">1</span>)<span class="sc">}</span><span class="ss">- </span><span class="sc">{</span>leaf_plot_point<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum_</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="driver" class="level3">
<h3 class="anchored" data-anchor-id="driver">Driver</h3>
<p>Here is a driver function to make use of the <code>plot_builder</code>.</p>
<p>It:</p>
<ol type="1">
<li>kicks off the first call to the <code>plot_builder</code>,</li>
<li>writes a file (for inspection outside this notebook) of the full <code>AgentRun</code> that is returned by the agent,</li>
<li>writes a file of the full plot outline generated by the agent, and</li>
<li>prints the full plot outline here in the notebook as well.</li>
</ol>
<div id="aac968db-bd5f-42cc-8776-8ab66e9a0a32" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> run_plot_builder(prompt: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="va">None</span>:</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    plot_agentrun <span class="op">=</span> extraction(<span class="st">'plot_agentrun'</span>, [], FullPlotPoint(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>        plot_point <span class="op">=</span> prompt,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        sub_plot_points <span class="op">=</span> [],</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    revise_indices_agentrun <span class="op">=</span> extraction(<span class="st">'revise_indices_agentrun'</span>, [], [])</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    run <span class="op">=</span> <span class="cf">await</span> plot_builder(noop_callback, [plot_agentrun, revise_indices_agentrun])</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">'plot_builder_output.json'</span>, <span class="st">'wt'</span>) <span class="im">as</span> f:</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        f.write(to_str(run))</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> redirect_stdout(io.StringIO()) <span class="im">as</span> f:</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        total_extractions <span class="op">=</span> print_plot(run)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    plot_outline <span class="op">=</span> f.getvalue()</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(plot_outline)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Did a total of </span><span class="sc">{</span>total_extractions<span class="sc">}</span><span class="ss"> extractions."</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">'plot_builder_output.txt'</span>, <span class="st">'wt'</span>) <span class="im">as</span> f:</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>        f.write(plot_outline)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="example-execution" class="level3">
<h3 class="anchored" data-anchor-id="example-execution">Example Execution</h3>
<div id="6e589cb0-d520-4147-ba09-32800043e6e0" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>PROMPT <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="st">A short film about a motocross race.</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span>.strip()</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> run_plot_builder(PROMPT)  <span class="co"># type: ignore[top-level-await]</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>- A determined rider fights to redeem themselves at a prestigious motocross championship after a career-defining setback, navigating personal demons, fierce competition, and their fraught relationship with a rival they once mentored.
  - At the regional qualifier‚Äîbilled as the final pathway to the nationals‚Äîthe aging protagonist makes an uncharacteristic tactical error during a crucial heat, losing control on a line they've executed flawlessly for decades. They crash hard in front of the crowds and sponsors, then remount to finish out of the points entirely. Shaken and visibly injured, they face their lead sponsor in the pits afterward, who delivers an ultimatum: place in the top three at the nationals in three weeks, or the sponsorship deal‚Äîtheir primary source of income‚Äîis terminated.
    - In the immediate aftermath of the crash, the protagonist clings to a fortress of rationalizations, fixating on external culprits‚Äîa setup issue they swear was present all week, a slick patch of track they blame for the loss of traction, even the humidity or tire warmup‚Äîanything to avoid the creeping suspicion that their own reflexes, not the bike or conditions, betrayed them. They become almost manic in this denial, rehashing technical details with their crew and demanding changes that they believe will prevent a "repeat" of this "anomaly," while refusing to slow down or adjust their riding line to account for the reality they won't acknowledge.
      - In the pits immediately after the crash, before fully processing what happened, the protagonist snaps at their crew, demanding to know what they changed on the bike setup, insisting something felt 'off' in ways they can't quite articulate‚Äîbut they're certain it wasn't rider error.
      - They seek out other riders or mechanics to validate their theory, fishing for confirmation that the track conditions were treacherous that day, or that 'everyone' was struggling with grip‚Äîanything to normalize their crash as environmental rather than personal.
      - Alone that night, the protagonist mentally reframes the crash as a 'one-off,' similar to a crash they had five years ago (which they recovered from instantly), convincing themselves that champions have bad days and this proves nothing about their capability.
      - They convince their crew to make aggressive setup changes for the nationals, framing it as 'optimization' rather than compensation for diminished reflexes; they insist on new tires, a rebalanced chassis, or a different suspension geometry‚Äîtreating the bike as the variable that needs fixing, not themselves.
      - In a conversation with someone close to them, when gently confronted about the crash, the protagonist becomes defensive and dismissive, interpreting concern as doubt and shutting down the conversation before it can go deeper, silently vowing to prove the doubters wrong through sheer willpower and performance.
    - In the garage that evening, as the veteran mechanic inspects the bike for damage and prepares for the nationals, they make a seemingly casual observation about the bike's setup and handling. They gently suggest that everything checked out fine‚Äîthe suspension, tire pressure, geometry‚Äîleading them to wonder aloud if perhaps the rider's timing was off on that line, or if they came in a fraction late, which could explain the loss of grip. The mechanic delivers this with genuine care, not accusation, but it plants a destabilizing seed of doubt: the crash wasn't about the machine or the conditions, but about the rider themselves. The protagonist's immediate reaction is defensive‚Äîthey over-explain, make excuses, or fall silent in a way that reveals how deeply the suggestion has landed. After the mechanic leaves, the protagonist sits with this implication, desperately trying to convince themselves it's not true while fearing it might be.
    - Alone in their motorhome late at night, bruised and wrapped in ice packs from the crash, the protagonist scrolls through footage on their phone‚Äîstarting with highlight reels of their greatest victories, then cutting to today's race footage. They watch their younger self attack a signature rhythm section with liquid grace, body position perfect, throttle modulation confident; then they watch today's version hesitate into the same section, body stiff, line fractured. They rewind and rewatch, searching for an explanation‚Äîa gust of wind, a bike malfunction, anything‚Äîbut with each replay, the truth becomes harder to deny: their reflexes are slower, their instincts less sharp, and no amount of grit can compensate for a body that no longer responds the way it once did.
      - The protagonist finds a specific video‚Äîa legendary performance from a decade ago where they won their most iconic championship‚Äîand watches it in full, allowing themselves to feel the pride and invincibility of that moment before forcing themselves to play today's footage alongside it.
      - They notice small, devastating details: how their younger self's weight transitions are imperceptible while today's are obvious and clumsy; how the younger version reads the track's micro-variations while today's version seems to be always one decision behind.
      - They attempt to rationalize the differences‚Äî'I'm injured from the crash,' 'The bike setup is wrong,' 'The track was dusty'‚Äîbut each excuse crumbles as they rewatch, because they can see these aren't equipment or condition issues, they're rider issues.
      - Physical exhaustion and pain from the crash intensify the emotional weight; their body aches in sync with their spiraling doubts, making it impossible to separate physical decline from psychological despair.
      - They fast-forward through social media clips, catching fragments of commentary from broadcast analysts or spectators‚Äî'Did you see him hesitate?' 'He used to flow through there like water'‚Äîand realize the decline isn't just something they feel internally; it's visible to everyone.
      - In a moment of desperate hope, they wonder if they're just having an off day, that tomorrow they'll feel sharper, faster, younger‚Äîbut this hope feels increasingly hollow as the evidence accumulates.
      - They set the phone down and sit in the dark, physically exhausted but mentally wired, facing the question they've been avoiding: Is this the body telling them what their pride won't admit?
    - That evening, the protagonist scrolls through social media in their motorhome, unable to stop themselves despite knowing better. Early comments are harsh but expected‚Äî"over the hill," "should retire with dignity." But one video clip catches their eye: footage of their crash set to mocking music, already viewed thousands of times. The comments range from cruel to clinical. Then, while grabbing food at the motorhome park, they overhear two younger spectators at the concession stand openly discussing whether the protagonist should even be allowed to compete‚Äîone suggests age should have a hard limit in professional motocross. The protagonist tries to move past them, but one rider they used to know casually‚Äîsomeone they respected years ago‚Äîcatches their eye and gives a sympathetic but unmistakable look of pity. That night cuts deeper than the strangers' mockery: pity means people who know the sport believe the judgment is fair. The protagonist returns to their motorhome and resets their phone, finding a cryptic post from their rival's Instagram account‚Äîa training montage set to aggressive music, captioned "The future is now"‚Äîand realizes that even their prot√©g√© is using their age as a narrative weapon.
    - The sponsor meeting takes place in a sleek corporate office far from the track‚Äîa cold, glass-and-steel environment that makes the protagonist feel out of place in their racing gear. The sponsor, flanked by a contracts manager, opens by acknowledging their years together but immediately pivots to "restructuring priorities" and "tightening ROI margins." They slide a contract across the table showing a performance clause: top-three finish at nationals, or the sponsorship terminates immediately with no buyout. The protagonist hears phrases like "aging demographic" and "market refresh" while the sponsor avoids direct eye contact. A small moment breaks the protagonist: when they glance at their own photo on the sponsor's wall‚Äîa glossy, triumphant image from five years ago‚Äîand notice the sponsor hasn't bothered to look at it during the entire meeting. Outside the office afterward, the protagonist realizes the sponsor never once referred to them by name, only as "the rider" or "this partnership." The meeting feels less like a negotiation and more like a courtesy notification before an execution.
    - After the sponsorship ultimatum, the protagonist is forced to confront a brutal financial reality: without this deal, they'll lose access to top-tier equipment, premium coaching, and travel funds, reducing them from a professional competitor to someone who can barely afford entry fees‚Äîmaking them question whether they can realistically compete at the nationals, let alone win.
      - The protagonist sits down with their finances for the first time in months and realizes that almost everything‚Äîbike maintenance, new parts, coaching fees, travel to regional events, even their motorhome payments‚Äîhas been covered by the sponsorship; their personal savings are negligible and their credit cards are carrying high balances from years of lifestyle creep.
      - They reach out to their equipment supplier to get a ballpark quote for essential race-ready parts without the sponsor's bulk discount, only to be quoted a price that represents months of their personal income, forcing them to confront the gap between what they need and what they can actually afford.
      - A conversation with their crew member or mechanic turns tense when the protagonist realizes their loyal team has been underpaid or working for reduced rates because the sponsor's money was supposed to cover payroll; without it, they'll have to release key staff members who've been with them for years.
      - The protagonist drives past their motorhome‚Äîthe only real estate they own‚Äîand calculates how much longer they can afford to keep it parked at the facility; the thought of living in a van and traveling to races, like they did as a hungry young competitor, triggers both desperation and a buried shame about how far they've fallen.
      - In a quiet moment, they research entry fees, travel costs, and pit pass expenses for the nationals, adding up the total with their phone calculator, and the final number makes their stomach drop‚Äîit's more than they've saved in the last year.
      - They receive a call or message from a younger, less established rider asking for advice, and the protagonist has to consciously remind themselves that they no longer have the resources to mentor or help anyone else; this small loss of generosity reinforces how their circumstances have narrowed.
      - Late at night, the protagonist lies awake and allows themselves to imagine the alternative: walking away, finding a desk job or coaching position, living a 'normal' life‚Äîand realizes that no part of them can accept that future; the race isn't just about money or sponsors anymore, it's about refusing to become ordinary.
    - That night, unable to sleep in the motorhome, the protagonist's mind spirals through the crash obsessively‚Äîreplaying it frame by frame from different angles, searching for the moment they lost control. Physical pain keeps them awake as their body reminds them of their age; they drift between moments of doubt about whether this is indeed the beginning of the end, and fragile, desperate hope that they still have one last championship run left in them.
      - The protagonist's battered body won't let them rest‚Äîbruised ribs ache with each breath, and when they try to shift position on the narrow motorhome bunk, a sharp pain in their shoulder (old injury aggravated in the crash) shoots through them, forcing them upright. They check the mirror: swollen jaw, road rash on their neck. Recovery from falls used to take days; they wonder how long this will take, and if their body can even handle three more weeks of training.
      - Unable to distract themselves, they pull up the race footage on their phone or laptop‚Äîthe same 30-second clip of the crash, watched dozens of times. Each viewing, they freeze-frame at a different moment: their body position into the turn, the exact angle of the bike, the instant their line goes wrong. They search for proof it was the bike, the track, anything‚Äîbut deep down they see the hesitation, the fractional delay that cost them.
      - Desperate for escape from their own thoughts, they reach for something‚Äîa half-empty bottle of bourbon left over from weeks ago, prescription pain medication, maybe just scrolling through their phone. They catch themselves and stop, recognizing the coping mechanism, knowing it won't help but feeling the temptation anyway. The fact that they're even considering it frightens them more than the crash did.
      - Around 3 AM, in the suffocating darkness of the motorhome, they confront the unspoken question: Who are they if they're not a motocross champion? Without racing, without sponsors, without the roar of crowds‚Äîdo they have anything left? The fear isn't just about losing income; it's about losing their identity.
      - They find themselves scrolling through old photos or videos on their phone‚Äîthemselves as a young, hungry rookie, podiums they've stood on, the exhilaration frozen in still images. In one, they're hoisting the national championship trophy, arms raised, pure joy on their face. They wonder if they'll ever feel that again, or if they're about to spend the rest of their life as 'that rider who had it all and let it slip away.'
      - In the darkest hour before dawn, a thought breaks through the despair‚Äîa memory of a come-from-behind win in their early career, a moment when everyone had counted them out. They'd found something then. Maybe, just maybe, they could find it again. It's fragile, barely a whisper, but it's enough to break the paralysis, and as exhaustion finally pulls them under just before sunrise, they don't wake in panic‚Äîthey wake with a question instead of a verdict: What if I'm not done yet?
  - A respected promoter who once worked with the protagonist extends an unexpected invitation to compete in the national championship‚Äîthe last held under the classic format before major rule changes‚Äîbut only if they can navigate qualifying rounds under tight timelines and prove their fitness to insurance assessors still wary of their age and injury history.
    - A former associate‚Äîa respected promoter or team owner with deep ties to the protagonist's past‚Äîtracks them down days after the regional loss, deliberately choosing a moment of private vulnerability to present a high-stakes opportunity: a wild card entry to the national championship, contingent on passing qualifiers. The associate reveals they've been watching the protagonist's decline and saw something in that catastrophic loss that the protagonist missed: not failure, but the ghost of their old fearlessness breaking through. They make it clear the offer is selfish‚Äîthey need a specific narrative for the championship's final year under the classic format‚Äîbut genuine: they believe the protagonist can still be great.
      - The associate attends or learns of the regional loss shortly after it happens, and unlike others who see only an aging rider's embarrassment, they notice something: a moment mid-race where the protagonist's old instincts flickered before doubt reasserted itself.
      - Days later, they track the protagonist down at a private, quiet moment‚Äîperhaps at home nursing injuries, or at a dive bar away from the motocross scene‚Äîdeliberately avoiding the protagonist's defensive public persona.
      - The associate reminds the protagonist of their shared history: a specific race, a mentorship, or a decision the protagonist made that changed the associate's career or perspective, establishing why this person's judgment carries weight.
      - Rather than offering hollow inspiration, the associate is frank about their own motivations: they're curating a historic final season before rule changes, and they need a redemption story‚Äîa veteran defying age and skepticism‚Äîto market the championship. They need the protagonist, but the protagonist also needs them.
      - The associate reveals they've kept tabs on the protagonist over the years, noticing the slow retreat from confidence into caution, and they argue that the regional crash was the protagonist finally showing up to the track like they used to‚Äîwilling to risk everything. They frame the wild card as a chance to finish that thought.
      - The protagonist resists, citing practical reasons: age, injuries, career inertia‚Äîbut the associate counters each objection not with motivational platitudes but with specific logistics: sponsors exist for this very comeback narrative, insurers have cleared older riders before, and the championship's qualifying window aligns with the protagonist's current sponsor ultimatum.
      - The associate extends the offer verbally but makes the protagonist sit with it for 48 hours before formally committing, forcing them to confront whether this is real desire or just escape from shame‚Äîand giving the associate plausible deniability if the protagonist refuses.
      - When the protagonist finally responds (either yes or with conditions), the associate's relief reveals their genuine belief: this isn't a business transaction to them alone. They've bet something of themselves on the protagonist's untapped potential.
    - The protagonist initially resists the wild card invitation, their pride recoiling from charity and their self-doubt insisting they're finished, until a crushing conversation about their sponsor ultimatum reveals an unexpected alignment: the championship window falls precisely within their final deadline to prove their worth‚Äîmaking this not just an opportunity, but their literal last chance before falling into obscurity or forced retirement.
      - The protagonist initially dismisses the wild card offer with bitterness, interpreting the outreach as pity rather than genuine belief in their potential, and refuses contact with the former associate for several days.
      - Mounting financial pressure arrives when the protagonist's primary sponsor issues a formal ultimatum: deliver podium finishes at upcoming events within the next eight weeks, or lose their contract and income‚Äîa deadline the protagonist initially keeps private, fearing it signals the end.
      - The protagonist confides in someone close to them (family member, longtime friend, or mechanic) about the sponsor situation, initially framing it as "time to hang it up," but this conversation forces them to articulate what losing the sport would actually mean beyond lost income.
      - The former associate makes a second outreach, more direct, revealing they've done their homework: they mention specific dates and deadlines, subtly confirming they know the protagonist's situation is dire‚Äîa moment that shifts the dynamic from charity to strategic necessity.
      - The protagonist reluctantly reviews the championship schedule and realizes the national championship dates align perfectly within the sponsor ultimatum window‚Äîfinishing strong there could save their contract, while missing it guarantees failure.
      - A moment of brutal honesty: the protagonist sits alone and confronts the choice between the comfort of a dignified fade-out versus the terrifying vulnerability of one final, all-in attempt where failure is public and devastating.
      - The protagonist makes the decision to accept, but frames it internally not as redemption or proving themselves, but as a simple fact: it's the only rational play left; they're already drowning, so they might as well swing for the fences.
    - The protagonist must undergo a grueling series of fitness evaluations and medical clearances orchestrated by insurance assessors skeptical of aging riders, forcing them to confront not only their physical limitations but also systemic prejudice, while navigating tight deadlines and the looming threat that a single failed test could permanently disqualify them from the championship.
      - The protagonist receives the official list of required evaluations: cardiovascular stress tests, bone density scans, reaction time assessments, and psychological evaluations‚Äîeach designed with age thresholds that effectively bias against older competitors.
      - During the first cardiovascular test, the protagonist struggles more than expected, triggering anxiety that this entire comeback might be physically impossible; however, they push through and barely pass, learning they'll need to improve stamina dramatically before the next phase.
      - A sympathetic team physician (perhaps the promoter's contact or someone with a stake in the protagonist's success) privately warns them that the insurance company is looking for any excuse to deny clearance, and hints at which tests are most likely to disqualify them.
      - The protagonist discovers an old injury‚Äîa previously undiagnosed hairline fracture or chronic issue‚Äîshows up on imaging, forcing an emergency consultation with an orthopedic specialist who must sign off or condemn their candidacy.
      - The psychological evaluation becomes unexpectedly confrontational when the evaluator questions whether the protagonist is mentally fit to compete, probing for signs of desperation, death wish, or cognitive decline; the protagonist must defend not just their mental state but their very right to attempt this comeback.
      - As deadlines approach and tests pile up, the protagonist is forced to choose: spend more time recovering and risk missing the championship window, or rush through remaining evaluations and risk failing from overexertion.
      - A final conversation with the insurance company's representative‚Äîsomeone rigid and bureaucratic‚Äîforces the protagonist to advocate fiercely for themselves, arguing that their experience and caution actually make them safer than reckless younger riders.
      - With days to spare before the championship, the protagonist receives conditional clearance with restrictions (reduced practice time, mandatory pit stops, medical monitoring), a pyrrhic victory that feels like both validation and humiliation.
    - The protagonist unexpectedly discovers their prot√©g√© is already registered as a top seed‚Äîa realization that transforms the championship from a personal redemption arc into a direct confrontation, forcing them to confront not only the aging body before them but the ghost of a mentorship gone wrong.
      - While reviewing the official entry list on the championship website late one night, the protagonist sees their former prot√©g√©'s name prominently seeded in the top three‚Äîa moment of cold recognition that hits like a second loss.
      - The protagonist learns the prot√©g√© has had a dominant season on the professional circuit, accumulating sponsorships and accolades that dwarf what the protagonist once achieved, amplifying the question: 'What can I possibly prove now?'
      - The protagonist grapples with conflicting emotions: pride in what they taught this rider, resentment that those teachings are being used against them, and deep uncertainty about whether confronting this prot√©g√© is redemption or just ego.
      - The protagonist reaches out through back channels to determine if the prot√©g√© knows about their wild card entry, discovering the information hasn't been shared yet‚Äîcreating a strategic advantage but also raising the stakes of their eventual reunion on the track.
      - Rather than backing down, the protagonist feels a strange pull toward this matchup: facing the prot√©g√© feels less like a sporting competition and more like a reckoning with their own failure to maintain their edge and legacy.
      - The protagonist considers withdrawing‚Äîcompeting is one thing, but deliberately stepping into the ring with someone who represents their obsolescence feels like self-sabotage until a mentor figure or close confidant reframes it as the only way to truly move forward.
    - The protagonist accepts the invitation in a moment of defiant clarity, but realizes immediately that this commitment means burning their escape hatches: rejecting the comfortable team owner job they'd been quietly offered, cashing out savings set aside for post-racing stability, and publicly declaring their entry‚Äîmaking it impossible to quietly retreat if things go wrong. They confront what "one last race" truly means: not just a final competition, but a final act of self-definition before accepting that their body and the sport have moved on.
      - The protagonist is offered a lucrative but emotionally hollow position as a team consultant or trainer at a respected stable‚Äîsteady income, security, a dignified off-ramp from competition‚Äîbut accepting it would feel like surrendering their identity to the injury and age they've been fighting.
      - In a private moment, the protagonist makes an active choice to turn down the job, explicitly telling the team owner they're going to race one more time, knowing this decision cuts off a safety net.
      - They begin liquidating savings and gear to fund the championship push themselves, a series of small financial commitments that accumulate into a point of no return.
      - The protagonist confides in someone close to them (family member or longtime friend/mechanic) about the full weight of what they're risking‚Äînot just money and reputation, but their physical health and the peace they might have found in retirement.
      - News leaks or the protagonist deliberately announces their wild card entry on social media or through media outlets, making it public and irrevocable; backing out now would mean public humiliation on top of private failure.
      - The protagonist visits their old track or a sacred personal space, and in a moment of solitude, they acknowledge they're not just fighting for a championship‚Äîthey're fighting to prove they haven't become irrelevant, that they still matter.
      - They prepare their bike and gear with ritualistic care, treating each maintenance task as a physical commitment, each dollar spent as a vote for believing in themselves one more time.
    - News of the protagonist's wild card entry spreads through the motocross community, generating conflicting narratives‚Äîsome celebrating an inspiring last stand, others dismissing it as a desperate gamble by an aging rider‚Äîwhile rivals and their teams actively analyze vulnerabilities and devise tactical strategies to exploit the protagonist's physical limitations and psychological fragility.
      - Word spreads quickly through the tight-knit motocross circuit: social media explodes with mixed commentary, longtime fans posting nostalgic highlights of the protagonist's glory days alongside skeptical takes about age and injury risks, while younger riders express admiration for the comeback attempt.
      - A prominent motocross journalist or media personality covers the story, framing it as either an inspiring redemption arc or a reckless bid by someone past their prime‚Äîthe framing depends on which narrative feeds better engagement, putting the protagonist at the mercy of public perception they cannot control.
      - The protagonist's rival team holds a tactical meeting where engineers and the prot√©g√© analyze footage of the protagonist's recent performances, identifying specific weaknesses: slower acceleration out of certain turns, favoring one side due to old injuries, signs of fatigue in later heats‚Äîthey develop targeted strategies to expose these vulnerabilities during the championship.
      - Rival riders and their sponsors begin trash-talking publicly or in interviews, with some dismissing the protagonist as a nostalgia act, others warning the field that a cornered veteran is dangerous, creating psychological noise designed to unsettle the protagonist and prove they don't belong.
      - The protagonist overhears or accidentally discovers evidence of the rival teams' strategic planning‚Äîperhaps through a leaked email, a conversation overheard at a sponsor event, or seeing footage of their own weakness being discussed‚Äîforcing them to confront that they're not just competing; they're being hunted because they're perceived as vulnerable.
      - Conversely, a smaller contingent of respected figures in the community‚Äîolder retired riders, loyal mechanics, grassroots fans‚Äîpublicly voice support, but their voices are often drowned out by the larger cynical narrative, leaving the protagonist uncertain which version of their comeback story is winning the cultural battle.
      - The protagonist must decide whether to engage with or ignore the narrative forming around them, and their choice‚Äîwhether to embrace the underdog role, defend themselves publicly, or focus purely on training‚Äîreveals character and sets the tone for how they'll handle the mounting psychological pressure heading into qualifying rounds.
  - Through vivid flashbacks, we see the protagonist taking a raw, undisciplined younger rider under their wing‚Äîteaching them precision lines, mental toughness, and the philosophy that champions race with respect for the sport and their competitors. A crucial moment shows the protagonist recognizing the prot√©g√©'s exceptional raw talent during a breakthrough practice session, offering genuine mentorship and life advice. However, subtle tensions hint that the prot√©g√©'s hunger is starting to transform into a desire to surpass rather than learn from their mentor.
    - The protagonist watches the young rider execute an impossibly smooth line through a technical section, only to lose control entirely moments later in a reckless overtake attempt, crashing hard into the barriers. Seeing the rider immediately remount‚Äîbruised and bleeding but determined‚Äîthe protagonist recognizes their younger self: raw talent coupled with dangerous hunger and self-destructive pride. After initial hesitation, they decide to mentor the rider, believing they can channel this hunger into greatness before it destroys them, while secretly hoping to pass on the wisdom they wish someone had given them.
      - The protagonist is at the track for their own training session when they notice the young rider‚Äîsomeone with no major sponsorships, desperate energy, and a hunger that's almost predatory. They watch from the sidelines, initially dismissive.
      - In one lap, the young rider threads through a series of turns with unexpected precision and grace, revealing legitimate talent beneath the recklessness‚Äîa moment that catches the protagonist's attention and makes them lean forward.
      - On the very next lap, seeking to prove something or impress observers, the young rider attempts an aggressive pass in an inappropriate place, misjudges the entry, and crashes violently into the barrier, sliding hard across the track.
      - The protagonist's breath catches‚Äînot from shock at the crash, but from recognition. The young rider's desperation, that need to prove themselves regardless of consequence, mirrors the protagonist's own younger self before experience taught them (painfully) about limits.
      - The young rider immediately remounts their bike and limps back to the pits, refusing help, blood dripping from their nose, eyes blazing with frustration and determination rather than fear. They're already replaying the crash, analyzing what went wrong tactically.
      - The protagonist finds themselves walking toward the young rider in the pits, uncertain why they're doing it. A conversation ensues where the rider reveals their story: no family money, no connections, this is their last real shot before age makes it impossible.
      - The protagonist recognizes something else: the rider's raw desperation mirrors their own current state‚Äîboth are fighting against inevitable decline or obscurity, both are willing to risk everything. In offering to mentor, the protagonist is partly trying to save a version of themselves.
      - The protagonist makes a quiet offer: 'You've got talent. But that death wish you're carrying will kill you before anyone else can beat you. Train with me for the next two weeks. If you're serious, I can open some doors.'
      - The young rider's response‚Äîskeptical but hungry‚Äîsuggests they see this as transactional, a means to an end, not a genuine mentorship. But the protagonist, still caught in their own need for purpose, chooses not to see this warning sign.
    - In an isolated desert practice track at dawn, the protagonist teaches the prot√©g√© "the Switchback"‚Äîa deceptively technical turn that demands reading the terrain's subtle grade change and timing the throttle with millimeter precision. The mentor demonstrates it first: smooth, controlled, almost meditative. When the prot√©g√© attacks it aggressively, sliding wide and nearly clipping the berm, the mentor stops them cold. Over multiple takes, the mentor breaks down the psychology: "You're trying to force it. The track tells you when to turn in. Listen to it." A moment of frustration flickers across the prot√©g√©'s face‚Äîthey're used to winning through raw speed, not patience. But when they finally nail it, executing the line with unexpected elegance, the mentor's genuine praise and a nod of deep respect create a real human connection. The mentor reveals a small scar on their arm: "Tried to muscle that turn for five years before I learned to dance with it instead." It's vulnerability wrapped in wisdom, and the prot√©g√© receives it as truth‚Äîthough later, in the rival arc, this same scar will become a point of leverage, a physical reminder of the mentor's "mistakes."
    - During a private training session, the protagonist notices the prot√©g√© taking increasingly aggressive, unnecessary risks‚Äîtrying to match the mentor's pace through sheer force rather than technique. When the prot√©g√© nearly crashes attempting a dangerous pass during a practice run, the protagonist pulls them aside and shares their hard-won philosophy: "The track humbles everyone. The riders who last are the ones who respect it, not the ones trying to prove something." The prot√©g√© nods and seems to accept this wisdom, but when the mentor asks what the lesson is, the prot√©g√© reframes it as "respect the track" rather than "respect the sport"‚Äîa subtle linguistic shift that hints they're already reinterpreting the mentor's advice through a competitive lens. Later, the protagonist overhears the prot√©g√© telling another rider, "My mentor says I need to race smarter, not harder. I guess that's because they can't race hard anymore," a comment that stings precisely because it reveals the prot√©g√© has already begun viewing age‚Äîand mortality‚Äîas a weakness to exploit.
    - During an early morning session at an abandoned track, the prot√©g√© executes the protagonist's signature technique‚Äîa precise, high-speed line through a treacherous double-apex turn‚Äîflawlessly for the first time. The protagonist witnesses it from the pit, their composed demeanor cracking into genuine amazement; they immediately rush out, physically embrace the prot√©g√© as they dismount, and share an unguarded moment of pride. Yet as the prot√©g√© removes their helmet, the protagonist catches a flash of something unexpected in their eyes‚Äînot just joy, but a hunger to claim mastery of this technique as their own‚Äîa moment that plants a seed of doubt the protagonist quickly dismisses.
      - The protagonist deliberately arranges an early morning training session before anyone else arrives at the track, wanting isolation and quiet focus‚Äîshowing how much they've invested in this prot√©g√©'s growth.
      - The prot√©g√© has attempted this double-apex turn dozens of times over weeks, each attempt ending in either a near-crash or a compromised exit; the tension builds as they've grown increasingly frustrated and doubting themselves.
      - The protagonist positions themselves at a specific vantage point in the pits, their body language tense‚Äîthey're invested but trying to appear casual, revealing how much they care about this moment.
      - On the approach, the protagonist can see the prot√©g√©'s hesitation‚Äîa micro-pause before committing to the line‚Äîbut nods encouragement, a silent signal that says 'trust it.'
      - The prot√©g√© enters the turn with perfect throttle control and lean angle; the bike holds the line through both apexes with precision that mirrors the protagonist's own technique, creating an almost spiritual moment of transmission.
      - As the prot√©g√© exits cleanly and accelerates away, the protagonist's carefully maintained composure shatters‚Äîthey visibly react with shock and pride, pulling off their sunglasses.
      - The prot√©g√© completes the lap and pulls into the pit area; before they've fully stopped, the protagonist is there, physically steadying the bike and pulling the rider off‚Äîan uncharacteristic display of emotion and physical affection.
      - In the embrace, the protagonist whispers something like, 'That's it. That's exactly it. You own that now'‚Äîwords meant to be empowering but that carry a seed of future contention.
      - As the prot√©g√©'s face emerges from the helmet, the protagonist glimpses something in their expression‚Äîa triumphant gleam that goes beyond joy‚Äîa flash suggesting the prot√©g√© views this mastery as a conquest or milestone toward surpassing their teacher.
      - The protagonist's smile falters imperceptibly as they consciously register this look; they rationalize it as intensity or competitive fire (healthy traits in a rider), but subconsciously file it away as a warning sign.
      - The two sit together afterward, the protagonist explaining the philosophy behind the technique‚Äîhow respecting the bike and the track is what makes it work‚Äîwhile the prot√©g√© listens intently but asks strategic questions about how to execute it even faster, subtly shifting the framing from learning to racing.
      - The scene ends with the protagonist placing a hand on the prot√©g√©'s shoulder, believing they've successfully imparted not just technique but wisdom; the prot√©g√©, meanwhile, is already mentally deconstructing how to beat this move in the future.
    - The protagonist leverages their fading sponsorship connections to secure the prot√©g√©'s entry into a regional qualifying event, incurring a personal debt that will later complicate their own championship bid. The prot√©g√© wins convincingly, but in the victory circle, they accept congratulations from sponsors without mentioning their mentor‚Äîa moment that stings more than the protagonist expects. Later, when the protagonist tries to debrief the prot√©g√© about race strategy and what they learned, the young rider deflects with casual arrogance ("I just did what I always do"), suggesting they've already begun to internalize the victory as proof of their own innate superiority rather than the culmination of mentorship.
      - The protagonist makes a phone call to an old contact at a major sponsorship agency‚Äîsomeone they haven't spoken to in years and to whom they still owe a personal favor. After some awkward negotiation, they successfully secure an entry slot for the prot√©g√©, but in doing so, they commit to promoting that sponsor's products for free at upcoming events, a concession that later costs them financially during their own championship preparation.
      - The regional event unfolds with the prot√©g√© executing the techniques and strategies the protagonist taught them; from the stands, the protagonist watches with genuine pride, seeing their legacy in action.
      - The prot√©g√© crosses the finish line first, a convincing victory with no close competition; the win is decisive and undeniable, proof that the mentorship worked.
      - In the victory circle, photographers and reporters from the sponsorship company swarm the prot√©g√©, celebrating their breakthrough. The prot√©g√© accepts their praise with enthusiasm but makes no mention of their mentor‚Äînot out of malice, but out of unconscious ego, as if their own talent and instinct alone were responsible for the win.
      - The protagonist watches from the sidelines, their hand raised in an attempt to wave or acknowledge the moment, but the prot√©g√© doesn't see them. A camera operator positions themselves between the protagonist and the victory celebration, and the protagonist instinctively steps back, suddenly aware they're now on the periphery of this success.
      - After the event, the protagonist finds the prot√©g√© and tries to have a post-race debrief, asking questions about how the prot√©g√© felt executing the turn they'd practiced, or how they managed pressure on the final lap. The prot√©g√© responds with short, dismissive answers: 'felt natural,' 'just rode,' 'instinct took over.'
      - The prot√©g√© casually says something like, 'I think I'm ready for the next level. I don't need to overthink it anymore‚ÄîI just need to trust myself.' The comment is meant innocently, but it implicitly suggests they've outgrown the need for their mentor's guidance.
      - The protagonist feels a chill of recognition: this is the moment the dynamic shifts. The prot√©g√© has begun to see their mentor's teachings not as ongoing wisdom but as training wheels they've now outgrown.
    - The prot√©g√©'s questions subtly shift from seeking understanding to seeking advantage; they begin studying the mentor's vulnerabilities, asking pointed questions about past injuries, race strategy, and sponsorship relationships‚Äîno longer asking "how do I improve?" but "what do you know that I don't?" The mentor senses the change in energy but chalks it up to the prot√©g√©'s growing confidence, initially taking pride in their assertiveness before realizing something darker has taken root in their dynamic.
      - The prot√©g√©'s initial questions about technique gradually become less frequent; instead, they begin asking the mentor about their injury history, recovery methods, and psychological strategies for handling pressure‚Äîframed casually, but with a probing intensity.
      - During a training session, the prot√©g√© asks the mentor to demonstrate their signature technique on a section of track the prot√©g√© has been struggling with; when the mentor complies, the prot√©g√© films it on their phone, saying casually 'for analysis later'‚Äîa small moment that makes the mentor slightly uncomfortable but seems innocent enough.
      - The prot√©g√© shifts to asking about the mentor's sponsorship deals and how they secured funding early in their career; the questions feel less about advice and more about understanding the business side, as if mapping out a competitive advantage.
      - A revealing conversation: the prot√©g√© asks the mentor about their greatest fear or weakness on the track, framed as 'so I know what to watch out for in myself,' but the mentor notices the prot√©g√© is genuinely cataloging their limitations rather than seeking guidance.
      - The mentor begins to sense something is off and tries to return to deeper mentorship conversations about philosophy or respect for the sport, but the prot√©g√© deflects, increasingly focused on extracting practical competitive information rather than absorbing wisdom.
      - A moment where the prot√©g√© casually mentions studying footage of one of the mentor's past losses in detail, analyzing 'where they went wrong'‚Äîsaid with a smile, but it stings the mentor because it reveals the prot√©g√© is now viewing them as a competitor to study and defeat rather than a guide to emulate.
      - The mentor confides this unease to someone else (a friend, family member, or fellow rider), expressing confusion: 'They're asking all the right questions, but something feels off‚Äîlike they're preparing for battle instead of learning.'
    - The protagonist, after watching the prot√©g√© push themselves to a dangerous limit during a late-night practice session, sits them down in a quiet moment and confesses about a specific past injury‚Äîperhaps a chronic weakness or a previous failure caused by overconfidence‚Äîthat still haunts their racing decisions. The mentor shares not just the injury, but the psychological toll: fear, self-doubt, the shame of having to sit out races. The prot√©g√© listens with apparent empathy, asking follow-up questions that seem supportive but are strategically designed to map their mentor's vulnerabilities and limitations. The mentor, grateful for the apparent understanding and connection, interprets the prot√©g√©'s focused questions as genuine interest in learning from their mistakes. But in a revealing moment‚Äîa slight hardening of the prot√©g√©'s eyes, a mental shift from listener to evaluator‚Äîwe see them mentally file away this information as tactical advantage: a weakness to exploit when they eventually compete directly.
      - The prot√©g√© executes a reckless maneuver in practice that nearly causes a crash, and the protagonist intervenes, genuinely concerned rather than critical, which prompts the late-night conversation.
      - The protagonist chooses a secluded location (perhaps the garage or empty track at dusk) to share the story, establishing this as an intimate, unguarded moment.
      - The mentor reveals a specific injury‚Äîperhaps a lingering shoulder injury that affects certain types of turns, or a mental block around a particular race condition‚Äîthat forced them to adapt their technique years ago.
      - The mentor admits they still sometimes take conservative lines because of fear, and that this caution has likely cost them races; this admission comes with visible emotion, showing real vulnerability.
      - The prot√©g√© asks seemingly innocent follow-up questions ('Does it still limit you on the sharp left turns?' or 'Does fatigue make it worse?') that are actually reconnaissance, identifying exploitable weaknesses.
      - A physical tell reveals the prot√©g√©'s shift: they lean back from their mentor, their expression transitions from concerned to calculating, suggesting the moment they stop seeing their mentor as a guide and start seeing them as an opponent.
      - The protagonist, misreading the prot√©g√©'s withdrawal as respect for the magnitude of the confession, feels the mentorship has deepened‚Äîthey've 'broken through' to real connection by being honest.
      - Later, the prot√©g√© is shown in solitude, reviewing notes or mentally cataloging what they learned; we see them practice specifically targeting the weak shoulder or the line the mentor avoids, cementing their tactical advantage.
    - A final mentorship moment‚Äîwhere the protagonist offers to step back and publicly support the prot√©g√©'s rise, believing they've successfully passed their legacy‚Äîbecomes a turning point neither realizes: the protagonist sees it as graceful succession, while the prot√©g√© hears permission to eclipse their former teacher and views the gesture as confirmation that they no longer need their mentor's guidance.
      - The protagonist arranges a private moment with the prot√©g√© before the prot√©g√©'s breakthrough regional win, offering to use their remaining sponsorship capital to sponsor the prot√©g√©'s climb to nationals‚Äîa significant sacrifice of their own competing opportunities.
      - The protagonist tells the prot√©g√©, 'You've got what it takes. More than I ever did. I want to see you win at nationals. That's what this was all about‚Äînot me staying on top, but making sure you get your shot.' The words are genuine and selfless.
      - The prot√©g√©'s response is studied and measured: 'I learned everything from you. I wouldn't be here without you.' The words are technically true, but their tone is hollow, and they're already mentally moving on.
      - The protagonist interprets the gratitude as validation of a job well done and feels a deep sense of purpose and legacy‚Äîthey believe they've transcended ego and truly mentored.
      - However, the prot√©g√©'s eyes betray a different calculation: they're silently tallying everything the protagonist has taught them and simultaneously cataloging the mentor's weaknesses‚Äîtheir aging body, their caution, the techniques that no longer work against faster, hungrier riders.
      - In a subtle but crucial moment, the prot√©g√© asks the protagonist, 'Do you ever regret not pushing harder? Like, what if you'd been more ruthless?' The question feels innocent, but it reveals the prot√©g√© now views gentleness and respect as limitations rather than strengths.
      - The protagonist misreads this as the prot√©g√© seeking reassurance, when it's actually the prot√©g√© confirming that their mentor's philosophy‚Äîracing with integrity‚Äîhas become expendable in their pursuit of victory.
      - As the prot√©g√© leaves the conversation, the protagonist feels the warmth of a successful mentorship and whispers something like, 'That's my legacy right there'‚Äîcompletely unaware they've just released a rider who now sees them as yesterday's knowledge, not tomorrow's inspiration.
  - The prot√©g√© has since become the protagonist's primary rival‚Äîtheir relationship fractured by years of unresolved tension, misaligned expectations, and the prot√©g√©'s struggle to escape their mentor's long shadow; though the prot√©g√© harbors genuine bitterness and is driven to prove superiority, traces of admiration and hurt remain beneath the surface.
    - Years after their mentorship ended, the prot√©g√© achieved early success in the circuit, winning regional races and attracting sponsorships. However, every achievement became shadowed by insistent comparisons to their mentor‚Äîcommentators framed victories through the lens of "the mentor's techniques," fans credited the protagonist's teachings, and sponsorships often highlighted the prot√©g√© as an extension of the protagonist's legacy rather than a rising talent in their own right. What initially felt like proud acknowledgment gradually became suffocating erasure, each win feeling hollow as the prot√©g√©'s own raw talent and relentless hard work went unrecognized.
      - Early in the prot√©g√©'s solo career, they win their first significant regional race; local media coverage frames it as 'the mentor's prot√©g√© proving their teachings work,' rather than celebrating the prot√©g√© as an emerging individual talent.
      - The prot√©g√© notices sponsorship interest ties directly to their connection to the protagonist; meetings with potential sponsors focus on 'riding like their mentor' rather than the prot√©g√©'s unique style or marketability.
      - After a breakout win, the prot√©g√© gives an enthusiastic interview crediting their own training regimen and instincts; clips from the interview circulate alongside commentary that reframes everything through the mentor's influence, making the prot√©g√© feel erased despite speaking up.
      - The prot√©g√© experiences a moment of vulnerability‚Äîdoubt creeping in‚Äîwondering if they actually are just riding on the protagonist's reputation and not truly talented in their own right, a psychological wound that festers.
      - A turning point interview where a prominent racing journalist explicitly says the prot√©g√© is 'riding in their mentor's shadow' and speculates whether they can ever truly be their own rider; the prot√©g√© sees this clip blow up on social media.
      - The prot√©g√© begins tracking every mention of their name online, noticing the ratio of praise for 'their mentor's teachings' versus acknowledgment of their own skill and work; resentment compounds with each new comparison.
      - The prot√©g√© starts subtly rebelling‚Äîmaking unorthodox tactical choices in races to assert independence, seeking interviews where they deliberately minimize the mentor's influence, even as results begin to suffer from the distraction of this internal battle.
    - At a major regional championship, the prot√©g√© secures a hard-won, come-from-behind victory through aggressive late-race maneuvers. Flush with triumph and independence, the prot√©g√© is mobbed by media and sponsors when the protagonist approaches‚Äînot with congratulations, but with a private-turned-public critique of one specific risky pass, framed as protective wisdom but landing as a fundamental doubt in the prot√©g√©'s judgment. The prot√©g√©'s elation curdles into shame and resentment, interpreting the criticism as the protagonist unable to accept that their former student has evolved beyond their conservative teachings and now succeeds *despite* rather than *because of* their mentorship.
      - The prot√©g√© wins the regional championship through a series of bold, calculated passes in the final laps‚Äîa victory that feels like definitive proof that they've transcended their mentor's cautious approach and forged their own winning identity.
      - The protagonist watches from the sidelines, genuinely impressed but also noticing one particular move‚Äîa pass on the inside line of turn seven‚Äîthat was audacious and effective but, in the protagonist's experience, carried unnecessary margin-of-error risk.
      - Post-race, the prot√©g√© is signing autographs and conducting media interviews, riding an emotional high, when the protagonist approaches and pulls them aside (or attempts to in semi-public view), asking about that turn-seven pass.
      - What the protagonist intends as wisdom ('That line had a razor-thin margin; if conditions shift even slightly, you eat dirt. You won when you could have won safer‚Äîwhy not bank that?') gets delivered in a tone tinged with parental concern or condescension.
      - The prot√©g√©, hyper-attuned to years of the protagonist's implicit message that their talent is incomplete without the mentor's guidance, hears: 'You got lucky. You're reckless. You need me to keep you from destroying yourself.'
      - The prot√©g√© responds coldly, pulling away: 'I won *my way*. Not your way. Not despite your way‚Äîmy way,' making clear that this contradiction of their autonomy in front of lingering onlookers is the final straw.
      - The protagonist realizes too late the words were misunderstood, attempts to clarify or soften the message, but the prot√©g√© has already hardened, offering a polite but distant brush-off and retreating into their team's circle.
      - In the following days, the prot√©g√© begins refusing the protagonist's calls and texts, and when a mutual friend tries to mediate, the prot√©g√© articulates a narrative: the protagonist could never let them grow, could never truly see their talent as separate from the mentorship, and the relationship had become stifling rather than nurturing.
    - The prot√©g√© makes a calculated but emotionally driven decision to publicly distance themselves from the protagonist: they ignore calls, decline to acknowledge their mentor's influence in interviews, and strategically position themselves as the next generation breaking free from their mentor's 'outdated' conservative approach. Through a series of carefully orchestrated media appearances, the prot√©g√© crafts a rival narrative that reframes the mentor-prot√©g√© relationship as limiting rather than foundational, gaining traction with younger fans and new sponsors eager for a fresh story.
      - The prot√©g√© initially ignores a series of calls from the protagonist after the unsolicited criticism, not blocking them entirely but creating pointed silence‚Äîthe first public signal of the rift when the prot√©g√© is photographed at a sponsor event wearing gear bearing a rival's logo, conspicuously absent any of the protagonist's branding.
      - A prominent motocross journalist reaches out for an interview, asking the prot√©g√© directly about their mentor's influence; the prot√©g√©, having rehearsed this moment privately, delivers a polished answer about 'forging my own path' and 'learning to trust my instincts over someone else's rulebook,' each word designed to sound respectful while implying the mentor was holding them back.
      - The interview goes viral among younger fans and generates social media buzz; momentum builds as the prot√©g√© gives a second, bolder interview where they specifically contrast their 'aggressive, modern' racing style with the mentor's 'defensive, old-school' philosophy‚Äîcareful not to name the protagonist directly, but everyone in the paddock knows exactly who they're referencing.
      - New sponsors approach the prot√©g√©, attracted by the fresh narrative of youth versus established tradition; one deal explicitly markets them as 'the next generation,' subtly positioning them against the previous era and the mentor who represents it.
      - At a televised pre-race event, the prot√©g√© and protagonist appear in the same paddock; when directly asked by a reporter if they've spoken, the prot√©g√© responds with cool professionalism: 'We all learn from different sources. I respect the past, but I'm focused on the future'‚Äîa statement that cuts deeper than any direct criticism, its civility making it more damaging.
      - The protagonist attempts one final outreach, a handwritten letter sent to the prot√©g√©'s team manager; the prot√©g√© never responds, and the silence becomes its own answer, solidifying the narrative that the mentor has been definitively left behind.
    - Despite the public animosity, the prot√©g√© harbors conflicted feelings that betray their carefully curated rival narrative‚Äîthey secretly watch replays of the protagonist's races, find themselves unconsciously mirroring techniques they were taught, and experience guilt when they catch themselves hoping their mentor will prove them wrong about being "outdated," creating an internal tug-of-war between the need to assert independence and the pull of genuine admiration.
      - The prot√©g√© obsessively rewatches the protagonist's races on their laptop late at night, analyzing lines and techniques with an intensity they don't apply to any other rider's footage, then deletes the browser history afterward, embarrassed by the behavior.
      - During their own training sessions, the prot√©g√© catches themselves executing a particular cornering technique exactly as the protagonist taught them years ago‚Äîmuscle memory betraying their narrative of independence‚Äîand they aggressively overcompensate by attempting riskier, less refined methods.
      - A fellow rider or friend casually mentions how impressed they are by the protagonist's upcoming performance or recent recovery from injury, and the prot√©g√©'s defensive reaction‚Äîtoo sharp, too hostile‚Äîreveals the emotional wound beneath their antagonism.
      - The prot√©g√© notices they've unconsciously adopted mannerisms from the protagonist: a specific pre-race ritual, a way of reading terrain, even phrases used in interviews‚Äîreminders that separation from their mentor was never complete, triggering both shame and a bittersweet sense of connection.
      - In a vulnerable moment alone (after a frustrating race or personal setback), the prot√©g√© permits themselves to imagine reaching out to their former mentor, rehearsing an apology or conversation in their head, before quickly shutting down the fantasy and reinforcing their public stance of indifference.
      - When the protagonist suffers a public setback or injury, the prot√©g√© experiences a complex emotional response: a brief, guilty satisfaction quickly overwhelmed by genuine concern and the realization that they don't actually want to see their mentor destroyed‚Äîonly to bury these feelings again.
    - At pre-race events and in the paddock, the protagonist and rival engage in carefully orchestrated avoidance that masks deep pain‚Äîbrief nods across crowded spaces, awkward moments where their paths nearly cross forcing stilted pleasantries, and interactions mediated by team personnel; these encounters reignite old wounds, with each side interpreting casual words as barbs and reading rejection into neutral gestures, while observers sense the electric tension between them.
      - At the national championship registration, they arrive simultaneously; the protagonist instinctively heads toward the rival to offer encouragement, but catches themselves mid-stride, instead pretending to check their phone, creating an awkward frozen moment where the rival notices the almost-greeting and turns away first, stung by the rejection they caused.
      - The rival watches the protagonist's practice session from behind the pit garage, hidden from view, studying their technique and body language for signs of decline‚Äîbut instead sees the old fire and precision, triggering a rush of conflicting emotions (admiration, jealousy, loss).
      - During a mandatory pre-race media event, they're positioned near each other; the rival's team strategically keeps them separated, but their body language is hyperaware of each other's presence‚Äîthe protagonist speaks louder than necessary about their comeback, while the rival's answers become shorter and more aggressive, each performance aimed at the other.
      - The rival's crew chief, noticing the prot√©g√©'s distraction, casually asks about their history; the prot√©g√© dismisses it as 'ancient history,' but then can't stop themselves from adding defensive comments about how they've surpassed their mentor's limitations‚Äîthe crew chief senses unresolved tension.
      - In the paddock, a mutual acquaintance (commentator, rival driver, sponsor representative) runs into both separately and foolishly attempts to bridge the gap, telling each how much the other 'still talks about them'; both deny it, but show visible reactions, later obsessing over what the other supposedly said.
      - The protagonist sees the rival stretching before a qualifying round and is flooded with muscle memory of teaching those exact stretches years ago; they want to call out a form correction but stop themselves, turning away instead‚Äîthe rival catches this moment of near-connection and feels a complex wave of longing and resentment.
      - They briefly make eye contact across the championship hall; for a split second, the masks drop and something raw flickers between them (recognition, hurt, maybe regret)‚Äîthen both quickly look away, shaken by how close they came to genuine connection, each replaying the moment alone later.
  - The protagonist, working with a grizzled ex-racer turned trainer, undergoes a grueling three-phase training regimen: rebuilding cardiovascular endurance and grip strength despite chronic shoulder pain, mastering aggressive new techniques to match their rival's speed, and undertaking psychological work to overcome the trauma of their humiliating loss and the terror of repeating it on the national stage.
    - Phase 1 - Brutal Basics: The protagonist begins pre-dawn training sessions under their grizzled trainer, expecting muscle memory to carry them through; instead, early morning rides ruthlessly expose how their body has deteriorated‚Äîtheir grip fails mid-maneuver, their shoulders scream in protest, and their cardiovascular system betrays them within minutes. Each session becomes a cascading series of humbling failures that forces them to confront the physical cost of years away from competition and acknowledge that nostalgia cannot substitute for conditioning.
      - The protagonist arrives at pre-dawn training brimming with false confidence, believing their body will 'remember' what it needs to do; they attempt their signature aggressive maneuver on the first lap and nearly low-side the bike, shocking themselves with how sluggish their reflexes have become.
      - In the following days, the trainer deliberately keeps rides short and controlled, but the protagonist can't make it through even abbreviated sessions without their grip hand going numb and their breathing becoming labored; the humiliation of physical limitations compounds each time.
      - A specific moment: during a simple figure-eight drill, the protagonist's chronic shoulder injury flares violently, causing them to drop the bike; lying on the dirt, they can feel the ghost of who they used to be warring with the fragile reality of who they are now.
      - The trainer offers minimal sympathy, forcing the protagonist to get back on immediately; this tough-love approach triggers conflicting emotions‚Äîresentment at the cruelty and gratitude that someone still believes they're worth pushing.
      - Late one morning, the protagonist experiences a cruel tease: for one perfect lap, everything clicks‚Äîmuscle memory floods back, instincts align, and they feel invincible for exactly 90 seconds before their cardiovascular system crashes and they're forced to stop, gasping and shaking.
      - That night, the protagonist reviews video of their pre-dawn rides for the first time and confronts the visual evidence: sloppy lines, hesitant entries, jerky corrections‚Äînothing like the smooth, predatory precision they remember from their championship days.
      - A turning point arrives when the protagonist, stubborn and desperate, tries to push through a session against the trainer's advice; they injure themselves again (minor but significant), and in the moment after, forced to sit out while the trainer waits silently, they finally verbalize the fear: 'I'm not the same person. I don't know if I can be.'
      - The trainer responds not with reassurance but with a challenge: 'You're not supposed to be. You're building something different. But first you have to stop mourning what's gone and start respecting what you've still got left.'
    - The protagonist's doctor delivers a brutal medical reality: imaging reveals chronic rotator cuff damage and accelerated cartilage loss; they're warned that another serious shoulder injury could result in permanent nerve damage or loss of arm function, and that their recovery rate has slowed dramatically due to age. The protagonist dismisses the warning with brittle confidence, but the next training session, their shoulder throbs with a new, terrifying intensity, planting seeds of doubt they cannot fully suppress.
      - During the appointment, the doctor shows the protagonist imaging results side-by-side with scans from five years prior, visually demonstrating the deterioration; this clinical evidence is harder to deny than vague warnings.
      - The doctor specifically mentions the risk of 'permanent nerve damage' and asks the protagonist point-blank: 'Is finishing one race worth losing use of your arm for the rest of your life?'‚Äîa question that hangs unanswered.
      - Driving home from the appointment, the protagonist is unusually quiet, gripping the steering wheel and testing their shoulder's range of motion obsessively, their denial already fracturing.
      - That evening, they research nerve damage and permanent injury outcomes online, falling into a rabbit hole of worst-case scenarios before forcing themselves to close the laptop, rationalizing that doctors are always overly cautious.
      - At the next training session, within the first thirty minutes, their shoulder flares with sharp pain during an aggressive turn; they push through it, but the sensation lingers‚Äîno longer just chronic ache, but a warning signal their body is literally screaming.
      - The trainer notices the protagonist favoring their left side and asks if they're okay; the protagonist lies and says it's nothing, but the lie itself feels like a small betrayal‚Äîof the trainer, of themselves‚Äîadding another layer of doubt.
      - That night, unable to sleep from shoulder pain, the protagonist lies awake imagining a future where they can't work on bikes, can't lift, can't embrace loved ones without pain; this imagined loss feels more terrifying than any racing defeat.
      - The next morning, the protagonist notices their family member watching them move gingerly through the kitchen, and in their eyes, the protagonist sees confirmation of what the doctor said: they're not invincible, they're aging, and this obsession might actually destroy them.
    - Phase 2 - Learning from the Enemy: The protagonist obsessively studies their rival's racing footage, discovering their mentee has not only mastered every technique they taught them but weaponized it into an aggressive, reckless style that borders on suicidal. As they analyze specific turns and lines, waves of conflicting emotions‚Äîpride in what they created, shame at what it's become, and competitive hunger‚Äîpush them to learn dangerous new approaches while wrestling with the moral question of whether matching aggression means abandoning the wisdom they once valued.
      - The protagonist obtains race footage of their rival's recent victories and begins analyzing it late into the night, initially as tactical preparation, but increasingly as an obsessive hunt for recognition of their own influence in every maneuver.
      - A specific moment occurs where the protagonist identifies one of their signature techniques‚Äîthe 'inside line feint' they invented decades ago‚Äîexecuted flawlessly by their rival, triggering an unexpected surge of paternal pride immediately followed by resentment at the credit going unacknowledged.
      - Through frame-by-frame analysis with the trainer, they discover their rival's most winning move: taking turns at angles and speeds the protagonist always considered too dangerous, accepting near-crashes as acceptable risk in a way that contradicts everything the protagonist taught them about calculated aggression.
      - The protagonist realizes with discomfort that their prot√©g√© didn't just learn the techniques‚Äîthey understood the *philosophy* behind them well enough to intentionally push past the safety boundaries the protagonist had imposed, revealing either boldness or recklessness (or both).
      - A confrontational session with the trainer escalates when the protagonist argues they need to match the rival's aggression, while the trainer warns that imitating recklessness is different from mastering calculated risk; the trainer challenges the protagonist: 'Are you learning from them, or are you just trying to beat a ghost version of yourself you taught them to become?'
      - The protagonist spends a night in the workshop studying their own old race footage, reminding themselves of the precise technical reasoning behind every line they invented; they recognize that what the rival calls 'improvement' is often just throwing caution to the wind.
      - A turning point arrives when the protagonist attempts to replicate one of the rival's most dangerous maneuvers during a practice lap and nearly crashes hard; they survive but are shaken, forcing them to confront whether they're physically and mentally capable of matching that level of recklessness.
      - The protagonist and trainer work to develop a hybrid approach: identifying which of the rival's aggressive lines are actually *innovative* (worth learning) versus which are simply reckless (to be avoided); this becomes a technical and philosophical exercise that restores the protagonist's confidence in their own judgment.
      - A quiet realization settles in: the protagonist's edge won't come from copying their prot√©g√©'s fearlessness, but from combining their decades of technical mastery with targeted aggression in *specific* moments‚Äîa more refined, intelligent form of speed that contrasts with the rival's raw hunger.
      - The protagonist drafts a new race strategy incorporating two or three of the rival's genuine innovations alongside their own proven techniques, creating a hybrid identity as a racer that feels both like evolution and like reclaiming their legacy on their own terms.
    - During an exhausting pre-dawn training session after weeks of slow progress, the trainer abruptly stops the protagonist mid-lap and, after tense silence, confronts them directly: he's seen the same hollow eye contact and mechanical movements that preceded the protagonist's regional qualifier collapse years ago. The trainer then opens up about his own retirement, admitting he withdrew from racing not at the peak of his hunger but when it started to fade‚Äîa cowardice he regrets. Seeing the protagonist repeat this pattern terrifies him, but the protagonist's stubborn insistence on continuing despite obvious pain and fear becomes the spark that reignites both their belief in redemption.
      - The trainer notices the protagonist arriving later each morning and performing mechanically through routines, going through motions without the fire that usually characterizes their riding; this echoes a specific moment from their competitive past when they watched the protagonist begin a similar decline before the regional collapse.
      - During a cool-down after a particularly sluggish session, the trainer directly asks: 'Are you here to race, or are you here because you're afraid to stop?'‚Äîa question that cuts to the heart of the protagonist's real motivation and forces honesty.
      - The trainer reveals his own exit from professional racing fifteen years ago: he quit not because of a dramatic injury or loss, but because he felt the hunger slipping away and chose the exit that protected his ego rather than risk discovering he was no longer good enough.
      - The trainer admits that watching the protagonist now‚Äîsomeone he once competed fiercely against‚Äîstruggle with the same doubts and decline triggers his own unresolved regrets; he's terrified of seeing another rider surrender to fear rather than face the truth of their abilities.
      - The protagonist responds defensively at first, insisting their slowness is physical (shoulder pain, age, recovery time) not mental; but as the trainer describes what he actually sees‚Äîthe way they flinch before aggressive turns, the way they've modified their race line to be safer‚Äîthe protagonist can't deny it.
      - In a moment of vulnerability, the protagonist admits they *are* afraid‚Äînot of losing, but of discovering that the humiliation at regionals wasn't a fluke but proof they really are finished, that their best years are genuinely behind them.
      - The trainer shares that this fear, this willingness to face the abyss rather than take the coward's retirement, is exactly what separates champions from everyone else; the protagonist's hunger isn't gone‚Äîit was just buried under layers of self-protection.
      - The two men stand in silence as dawn breaks over the empty track, and the trainer says quietly: 'If you're going to do this, do it like you're still hungry. If you're not, quit now while you still have your pride.'
      - The protagonist returns to training with a subtle but palpable shift in intensity; the trainer watches with recognition, understanding that his own confession and challenge have given the protagonist permission to stop fighting their desire and embrace it fully.
    - A pivotal training crash during a dangerous new technique drill leaves the protagonist hospitalized with multiple broken ribs and a partially separated shoulder; the injury forces six weeks of painful recovery during which they question whether their body can survive the championship. Simultaneously, their estranged spouse (or parent/sibling) confronts them during a hospital visit, revealing the collision of their obsession with family obligations and expressing an ultimatum: abandon the championship dream or accept the consequences to their relationship. Isolated during recovery, the protagonist must reconcile whether they're genuinely chasing redemption or recklessly pursuing self-destruction, while physical therapy becomes a metaphor for learning to move forward differently‚Äîboth literally and emotionally.
      - The crash itself: The protagonist, desperate to close the gap on their rival's fastest lap time, rushes into mastering an aggressive new cornering technique before their body is ready; they lose control mid-turn and are ejected over the handlebars, landing hard on their side‚Äîthe impact cracking three ribs and leaving them gasping for breath on the track while medical personnel rush to their aid.
      - Hospital scene and diagnosis: X-rays reveal not just the broken ribs but also a partially separated shoulder (lingering damage from their old injury, now worsened); the doctor is blunt‚Äîthe shoulder won't be fully healed before nationals, and further damage could end their racing career permanently.
      - Visitor arrives: During a difficult hospital visit, the protagonist's spouse/family member (someone they've been distant from during training) sits at their bedside and forces a reckoning; they detail specific moments of abandonment (missed family dinners, broken promises, being emotionally unavailable), and articulates that if the protagonist continues with the championship, it signals they care more about their own legacy than the relationship.
      - The ultimatum and silence: The family member leaves without waiting for an answer, leaving the protagonist alone in the hospital bed facing a genuine choice: they cannot have both the comeback and the relationship as currently structured; this creates genuine dramatic tension.
      - Physical therapy ordeal: During the six weeks of recovery, physical therapy sessions are agonizing; the protagonist must painfully rebuild mobility in their ribs and shoulder, and for the first time, they cannot push through it‚Äîtheir body literally will not allow it; they're forced to move slowly, to rest, to accept limitation.
      - Internal reckoning: Late-night hospital and home recovery moments reveal the protagonist grappling with whether they've been chasing redemption or running from the responsibility of aging, failure, and irrelevance; they confront the uncomfortable truth that winning won't fix their relationships or their worth.
      - Reaching out: A quiet turning point where the protagonist, humbled and injured, initiates a difficult conversation with their family member‚Äînot promising to quit, but genuinely listening for the first time and acknowledging the damage their obsession has caused.
      - Return to training: Against their doctor's advice, but with newfound emotional honesty, the protagonist returns to training with just two weeks until nationals; they're slower and more limited due to their injuries, but their mental state has shifted‚Äîthey're no longer running, they're choosing.
    - Phase 3 - Mental Reckoning: The protagonist begins working with a sports psychologist, initially resistant and defensive, and through a series of intense sessions gradually excavates the humiliation beneath their regional qualifier loss, the perfectionism that once drove them to greatness but now suffocates their riding, and ultimately confronts a deeper fear: that they no longer *deserve* to win because they've become someone they don't respect.
      - The trainer finally delivers an ultimatum: if the protagonist won't address their headspace, physical training alone will fail them; a referral comes for Dr. Elena Reeves, a former competitive athlete turned psychologist who specializes in athlete trauma and shame.
      - In the first session, the protagonist is guarded and contemptuous, viewing therapy as weakness; Dr. Reeves doesn't push, instead asking a deceptively simple question: 'What did you do immediately after the regional qualifier loss?' The answer‚Äîgoing home, drinking alone, not answering calls from family or sponsors‚Äîreveals the protagonist's shame spiral pattern.
      - A breakthrough arrives when Dr. Reeves asks them to describe, in vivid detail, the specific moment they lost the race: who was ahead, what the crowd sounded like, how their body felt, what they told themselves in that moment; the protagonist realizes they've been replaying a distorted version where they were incompetent, when actually they made one tactical error against a faster opponent.
      - Through guided reflection, the protagonist recognizes that their toxic perfectionism‚Äîthe belief they had to be flawless to be worthy‚Äîcame from a parent's conditional love or early experience of being praised only for winning; this perfectionism served as armor, but now it's a prison, making every mistake feel like total annihilation.
      - A pivotal session occurs when Dr. Reeves asks: 'If your rival crashed tomorrow and couldn't race, would you want to win this championship?' The protagonist's honest answer‚Äî'No, not really'‚Äîshakes them; they realize they don't want to win for *themselves*, they want to win to restore their ego and silence critics, which is a fragile, reactive motivation.
      - Over subsequent sessions, the protagonist begins differentiating between 'fear-based perfectionism' (riding to prove they're not a failure) and 'growth-based excellence' (riding to master the craft itself); this semantic shift subtly changes how they approach training and risk.
      - In a raw emotional moment, the protagonist admits to Dr. Reeves that they're terrified they've become a cautionary tale‚Äîthe washed-up athlete clinging to past glory‚Äîand that even winning nationals won't fix what they fear is broken inside them; Dr. Reeves reframes this: the goal isn't to fix a broken past self, but to honor their present self by showing up courageously.
      - The protagonist begins keeping a post-session journal where they write letters to their younger self (the hungry kid who loved riding) and their future self (the person they want to become beyond this race); these letters become emotional anchors when self-doubt resurfaces.
      - In the final weeks before nationals, the protagonist notices they're riding differently in practice‚Äîless rigidly perfectionist, more adaptive and intuitive; Dr. Reeves observes that they've finally separated their *self-worth* from their *performance*, which paradoxically makes them a faster, more confident rider.
      - A quiet moment before nationals: the protagonist re-reads Dr. Reeves's final session note, which includes the insight that 'redemption isn't about proving anything to anyone else‚Äîit's about proving to yourself that you can face your fears and ride anyway'; this becomes their true north for race day.
    - Late-night visualization sessions emerge as the protagonist's critical turning point: alone in their dimly lit garage, they practice dissociating the finish line from their self-worth, imagining themselves crashing and remounting with the same dignity they'd display winning; mantras solidify around "I am enough in the struggle"‚Äîa painful rewiring of their perfectionist identity; when a routine training run ends in a fall that would have previously spiraled them into despair, they instead notice the shift: they feel the fear and shame, but choose to stay on the bike, demonstrating to themselves that survival through failure is possible.
      - The protagonist's sports psychologist assigns them a specific visualization exercise: imagine the worst-case scenario (crashing, finishing last, public humiliation) but extend the visualization beyond the moment of failure to include themselves getting up, walking off the track, and how they'd feel hours later‚Äîdiscovering that survival is survivable and doesn't destroy them.
      - During a late-night session in the garage, the protagonist sits on their bike in darkness and rehearses this visualization repeatedly, initially resisting the urge to 'fix' the imagined failure into a victory, instead sitting with the discomfort of imagined loss until their nervous system stops perceiving it as catastrophic.
      - A specific mantra crystallizes through this work: 'I am enough in the struggle'‚Äîa stark contrast to their former perfectionist mantra about winning; they write it on tape and wrap it around their handlebars as both a practical reminder and a symbolic anchor.
      - During a routine practice session, the protagonist executes a new aggressive line they've been working on, crashes hard, and feels the familiar spiral of shame begin‚Äîbut recognizes it, names it, and consciously chooses to remount immediately rather than sitting in self-recrimination; this moment becomes proof that their mental work is transferring to real conditions.
      - The trainer witnesses this crash and remount, and instead of rushing to help or criticize, simply nods; later they tell the protagonist, 'That's the rider I've been waiting to see‚Äînot the one afraid to fall, but the one who's made peace with it'; the validation cements the shift.
    - During a visualization session with his sports psychologist, the protagonist attempts to mentally recreate his past championship-winning ride, moment for moment‚Äîbut finds he cannot access it. The memory feels like watching a film of someone else. Confronted with the impossibility of reclaiming that version of himself, something breaks open: he stops chasing a ghost. Instead of grief, he feels a strange liberation. That night, during a practice run, his body moves differently‚Äînot with the rigid perfectionism of his younger self, but with intuitive aggression and present-moment awareness. For the first time in months, he's not riding to prove something to his past; he's riding to discover what his present self is capable of. This mental shift, though small, unlocks a hunger that feels cleaner, less desperate, and paradoxically more powerful.
    - Three days before nationals, the protagonist stops at a late-night gas station along the highway where they both happen to refuel; in the harsh fluorescent light by the pumps, they notice each other simultaneously‚Äîboth moving slowly, both favoring old injuries, both buying electrolyte drinks and energy bars with the mechanical precision of athletes counting down the hours. When they lock eyes across the convenience store, neither looks away immediately, and a beat of recognition passes between them: the rival's face shows the same hollowed-out exhaustion the protagonist feels in their bones. Inside, they stand in the same aisle, close enough to speak but saying nothing, until the protagonist glimpses the rival's hands wrapped in fresh athletic tape and notices them wince while reaching for a bottle. A moment of connection flickers‚Äîthe protagonist realizes their prot√©g√© is carrying their own injury, their own terror‚Äîbut the rival turns away sharply, reasserting the wall between them. The encounter ends without words, both leaving in different directions, but the protagonist drives away with an unexpected ambivalence: they've been humanized to each other, yet this knowledge feels dangerous, a vulnerability neither can afford to carry into the final days before battle.
    - In the final week before nationals, the protagonist clocks their fastest practice lap in years, a breakthrough moment that validates months of grueling training; but on the second attempt, pushing even harder to replicate the speed, they crash spectacularly‚Äîa violent high-side that leaves them shaken and injured. Waking the next morning sore and rattled, they seriously contemplate withdrawal, receiving a crushing message from their estranged family member about "knowing when to quit." A tense late-night confrontation with the trainer forces the protagonist to articulate their fear of repeating their humiliating loss on the national stage, and the trainer shares a hard truth: he's watched the protagonist confuse "boldness" with "recklessness" for years, but this time, something has genuinely shifted in their riding. The trainer challenges them to distinguish between fear that signals real danger (wisdom) and fear that simply guards against vulnerability and failure (ego protection), ultimately leaving the choice to the protagonist.
      - The protagonist completes a flawless practice lap‚Äîtheir fastest time in years‚Äîleaving them exhilarated and validated; the trainer even nods with rare approval.
      - Intoxicated by the success and desperate to prove it wasn't a fluke, the protagonist insists on pushing harder on lap two, adopting an even more aggressive line.
      - The crash is catastrophic: the bike slides out mid-turn, launching the protagonist over the handlebars; they land hard, the wind knocked out of them, physical pain radiating through their body‚Äîand beneath it, a deeper shame at losing control.
      - Recovery is slow and painful. The protagonist limps around the garage, icing injuries, replaying the crash in obsessive loops, questioning whether they pushed too hard too soon.
      - A text arrives from their estranged family member: 'Maybe Dad was right to worry. Maybe it's time to accept this isn't your time anymore. Please just come home safe.' The words hit harder than the physical pain.
      - That evening, the protagonist sits alone on their bike, helmet in hand, seriously considering calling the championship organizers to withdraw.
      - The trainer finds them there. Initially, they don't speak‚Äîjust sit together in the quiet. Then the protagonist breaks: 'I proved I'm still just the same fool who crashed and burned before. Why would this time be different?'
      - The trainer's response cuts through: 'I've watched you for forty years. You've always confused being brave with being stupid. But these past three months? That's not the same man. You crashed because you were hungry, not because you were reckless. The question is: can you feel the difference?'
      - The trainer elaborates, telling the protagonist that true wisdom about risk isn't about fear‚Äîit's about knowing the difference between the terror of failing (which keeps them small and safe) and the instinct that says 'slow down, this line is genuinely dangerous.' One is ego armor. The other is survival.
      - The protagonist sits with this. They recall moments during training where they backed off a maneuver because something felt wrong‚Äîand they were right. They also recall the crash‚Äîand realize they were pushing not to win, but to erase self-doubt.
      - The trainer stands to leave, offering no more advice: 'You know what you have to do. Only question is whether you'll do it.' The choice is placed squarely on the protagonist's shoulders, leaving them to wrestle through the night with the decision.
  - The protagonist's teenage daughter, who once worshipped their racing career, feels increasingly abandoned as the protagonist pours every waking hour into training; a heated confrontation forces the protagonist to confront whether they're chasing redemption for themselves or proving something to their daughter‚Äîand risking losing her in the process.
    - Early in the training montage, the daughter surprises the protagonist at a pre-dawn practice session, arriving with coffee and breakfast‚Äîa gesture meant to bond‚Äîbut finds the protagonist already locked into an obsessive rhythm of lap drills; as she tries to get their attention from the sidelines, the protagonist is so deep in their head-space that they offer only distracted grunts and waves, missing entirely that she's holding back tears; when she finally leaves, she doesn't say goodbye, and the protagonist doesn't notice she's gone until hours later.
    - The protagonist misses their daughter's first major solo violin recital‚Äîa performance the daughter has been preparing for months and invited the protagonist to attend‚Äîbecause a crucial training session is scheduled at the same time; when the protagonist later attempts to apologize with promises of "next time," the daughter's bitter response reveals that this isn't the first missed event and that she's stopped expecting the protagonist to show up.
      - Days before the recital, the daughter mentions it casually during dinner, trying to downplay her nervousness; she leaves the invitation on the protagonist's desk, but the protagonist is already mentally reviewing the national championship course and barely registers it.
      - The protagonist's trainer schedules a final, crucial track session at a private facility for the same evening‚Äîa session the protagonist has been waiting weeks for, one that could test a new setup against rival riders' data; the protagonist sees the calendar conflict and wrestles with it for a moment, then rationalizes that the recital is 'just one performance' and promises to record it.
      - The daughter asks the protagonist directly, 'You'll be there, right?' The protagonist says 'Yeah, babe, of course,' but the answer comes a beat too late and with too little eye contact, and the daughter sees through it‚Äîshe knows this isn't a yes, it's an 'I hope so, but no promises.'
      - On the night of the recital, the protagonist gets caught in unexpected traffic heading to the track and arrives at the session late; by the time they realize the recital must have started, they don't turn back.
      - The protagonist returns home to find the daughter already in her room, still wearing the recital dress; the protagonist knocks, enters with flowers and apologies: 'I'm so sorry, kid. I got held up. Tell me how it went‚ÄîI bet you were amazing.'
      - The daughter turns from her window, face blank and controlled in a way that's more heartbreaking than anger: 'It was fine. I nailed the solo. Mom recorded it.' The use of 'Mom' (revealing the other parent was there) and the clinical tone suggests the daughter has already processed the absence.
      - The protagonist pivots to reassurance: 'Hey, look, there are other performances. Next season you'll have a whole tour of recitals and I promise I'll be at every‚Äî' but the daughter cuts her off.
      - The daughter says quietly, 'You don't have to promise. You can just say you can't make it. That's easier than... this.' She gestures vaguely at the flowers, the apology, the performance of caring. The protagonist pushes back, defensive: 'That's not fair. I'm trying here,' but the daughter's response is the real wound: 'You tried. Last year at my competition. The year before at my art show. You try and then you don't show up. So now I just... I don't invite you anymore to the things that matter.'
      - The protagonist realizes this recital wasn't the first miss‚Äîthe daughter has simply stopped expecting them, and more painfully, has stopped wanting them there, because the hope followed by disappointment is worse than no hope at all.
    - The daughter systematically distances herself from her father's legacy, removing his memorabilia from her room and actively seeking out a surrogate parental figure‚Äîan aunt, uncle, or family friend‚Äîwho offers the time and attention the protagonist can no longer provide, making her shift in loyalty visible through small, heartbreaking choices.
      - The protagonist notices the daughter's bedroom has changed: old framed photos from race days are gone, posters and autographed merch have been taken down or packed away, replaced by neutral decor‚Äîa silent but unmistakable erasing of the protagonist's presence from her private space.
      - During a casual family meal or moment, the daughter mentions an upcoming outing or accomplishment and casually reveals she's already made plans with her aunt/uncle (or family friend) to celebrate or prepare, not asking if the protagonist wants to be involved.
      - The protagonist witnesses or learns that the daughter is spending increasing amounts of time at the other adult's house after school‚Äîostensibly for help with homework, a hobby, or just 'hanging out'‚Äîand hears genuine laughter and easiness in her voice when talking about these visits, a tone the protagonist hasn't heard directed at them in weeks.
      - A small but pointed moment: the daughter receives a gift or word of encouragement from the surrogate figure about something she cares about (academic progress, a personal goal, a creative pursuit), and her grateful, unguarded reaction reveals how starved she's been for that kind of attention and pride from someone present in her life.
      - The protagonist finds or overhears the daughter talking to a friend about the surrogate adult‚Äîusing words like 'actually listens' or 'is always there'‚Äîor even referring to them with a term of affection, realizing the daughter is unconsciously comparing them and finding the protagonist lacking.
    - During a late-night argument, the daughter confronts the protagonist about missing yet another important moment in her life, accusing them of chasing redemption for themselves rather than being present for those who never doubted them; the protagonist, exhausted and defensive, snaps back with words that suggest they resent the burden of her expectations‚Äîa line that wounds the daughter far deeper than any rejection of her presence could.
      - The daughter discovers the protagonist has overslept and missed her college orientation fair‚Äîan event the protagonist had promised to attend; when confronted, the protagonist dismisses it as "not a big deal" and immediately pivots to discussing a scheduling conflict with tomorrow's training session.
      - Frustrated by the dismissal, the daughter pushes harder: "You promised. You always promise, and then something with the bike comes up, and suddenly I'm not important anymore."
      - The protagonist, already sleep-deprived and wound tight from training, responds defensively: "I've given you everything. I've sacrificed for you. Maybe it's time you understood that not everything is about you."
      - The daughter, stung, retorts: "That's the problem. Everything is about proving yourself to everyone else. You don't even see me anymore‚Äîyou just see proof that you failed as a dad too."
      - The protagonist, hit with a truth they can't deflect, lashes out: "You know what? Maybe you're right. Maybe you'd be better off with your aunt, since she's so goddamn available. At least then I wouldn't feel guilty every single second for not being perfect enough for you."
      - The words hang in the air‚Äîthe protagonist has essentially said, 'I resent you for making me feel like a failure as a parent,' and the daughter hears it as, 'I wish you weren't my problem.'
      - The daughter's face goes quiet and hollow; without another word, she turns and leaves the room, and the sound of her bedroom door closing feels final.
      - The protagonist, left alone, realizes the damage‚Äînot just emotional withdrawal, but the confirmation in the daughter's eyes that she's learned the hard way: she cannot depend on them, and trying to will only hurt.
    - During a late-night confrontation that escalates from the protagonist's defensive reaction to the daughter's earlier accusations, the argument reaches a breaking point where the daughter's facade of resentment cracks; through tears, she admits she's terrified the protagonist will suffer another catastrophic crash‚Äîboth physically and mentally‚Äîand that she's helpless to stop it, revealing that her anger has been armor against the deeper terror of losing them.
      - The argument begins with the daughter repeating her earlier accusation that the protagonist only cares about proving everyone wrong, but when the protagonist responds defensively or dismissively, it triggers the daughter to escalate‚Äîno longer holding back her real fear beneath the resentment.
      - The daughter references the protagonist's previous crash/setback in vivid detail‚Äîwhat they saw, what the recovery looked like, how frightened she was then‚Äîmaking clear her present anxiety isn't abstract but rooted in witnessed trauma.
      - The protagonist tries to reassure her with platitudes ('I know what I'm doing' or 'I'll be fine'), which only deepens the daughter's panic, because she realizes her parent still isn't hearing her actual fear, only her accusations.
      - In frustration and fear, the daughter's voice breaks as she admits: 'I'm not mad because you're racing. I'm mad because you're going to crash and I can't stop you, and last time you crashed I thought I was going to lose you, and I can't‚Äî' (trails off, unable to finish).
      - The protagonist is silent, truly hearing their child's terror for perhaps the first time, and realizes that the daughter's gravitating toward the aunt/uncle figure and her absence from race day aren't acts of rebellion‚Äîthey're self-protective measures, ways of creating distance to shield herself from further heartbreak.
      - The daughter admits that her resentment and coldness have been ways of preparing herself for the worst‚Äîif she stops loving the protagonist's racing career, maybe losing them won't hurt as much; and if she pulls away now, at least the separation is on her terms.
    - The daughter, after days of silence, makes the agonizing decision not to attend the national championship; her deliberate absence serves as both an act of self-protection and a final, wordless statement about what the protagonist has sacrificed‚Äîand she delivers this news in a way that forces the protagonist to truly hear her pain.
      - Days before the championship, the daughter withdraws further; she's polite but distant, no longer angry‚Äîa shift that feels even more devastating than her accusations because it suggests she's made a final decision and moved past the fight.
      - The protagonist notices the daughter has stopped asking about logistics (what time the race is, where it's being held, etc.), a detail that triggers creeping dread but which the protagonist initially rationalizes as her just not caring anymore.
      - The daughter finally speaks about her choice not in an argument but during a quiet, mundane moment (washing dishes, sitting in the car, before bed)‚Äîher calm tone making it hit harder than any shouting could; she explains she can't watch him risk everything again, that she needs to protect herself from the fear and disappointment.
      - The protagonist's first instinct is to try to convince her to come, to promise he'll be careful, to appeal to sentiment ('don't you want to be there when your dad proves himself?'); the daughter's response‚Äîa sad shake of her head, a quiet 'I can't'‚Äîshows that logic and promises won't change her mind.
      - The protagonist realizes this isn't about the race at all; the daughter has already lost faith that he'll choose her, so she's choosing to not be present for what feels like inevitable heartbreak, whether he wins or loses.
      - As race day approaches, the protagonist catches themselves repeatedly scanning the crowd in their mind, knowing her seat will be empty, and this absence becomes a weight they'll carry into the competition‚Äîa personal reminder of what they're really racing against.
    - In the days before the championship, the protagonist discovers their daughter has planned something special (a poster, a playlist, handwritten letter of encouragement) in secret‚Äîbut after finding it hidden, unused, they confront a brutal truth: the daughter has already emotionally withdrawn, no longer believing the protagonist will show up for them. Devastated and alone in their trailer the night before the race, the protagonist is forced to choose between the relentless pursuit of vindication and the possibility of genuine reconnection, leading them to make one final call or gesture to their daughter‚Äînot to guarantee forgiveness, but to signal that they now understand what they've been willing to sacrifice.
      - The night before the championship, while organizing gear, the protagonist stumbles upon a carefully hidden poster or handmade banner their daughter had begun creating‚Äîfeaturing old photos of the protagonist's glory days and supportive messages in teenage handwriting, now abandoned and half-finished under the bed.
      - The discovery triggers an unbidden memory: the daughter excitedly asking months ago if the protagonist thought they'd come watch them compete, followed by the protagonist's distracted non-answer as they mentally calculated lap times.
      - Sitting alone in their trailer, the protagonist's coach or team member tries to pump them up with talk of redemption, vindication, and proving doubters wrong‚Äîthe same speech that's fueled months of single-minded training‚Äîbut for the first time, it rings hollow.
      - The protagonist realizes that all the physical preparation means nothing if they cross the finish line and return to a home where their daughter is a stranger who's learned the hard way that the protagonist's love is conditional, dependent on chasing ghosts.
      - In a moment of raw vulnerability, the protagonist pulls up their phone and calls or visits their daughter, not to ask her to come to the race or to apologize with empty promises, but to say something like: 'I see what I've been doing. I can't fix it tonight, but I need you to know‚Äîyou matter more than any trophy or comeback. I don't know if I'll place tomorrow, but I'm choosing to actually be here now.'
      - The daughter's response (acceptance, hesitation, cautious hope, or guarded warmth) remains uncertain, but the gesture itself‚Äîthe protagonist prioritizing honesty and presence over the illusion of a perfect comeback narrative‚Äîbecomes the real stake of race day: they're riding not just for redemption, but for the chance to rebuild trust afterward.
      - The protagonist returns to their trailer that night with a new clarity: they can't control whether they win, whether they impress the rival, or whether the comeback narrative completes itself‚Äîbut they can control whether they show up for the people who never left them, starting now and continuing long after the final heat.
  - Race day arrives with media attention and scrutiny; as the early heats unfold, the protagonist discovers renewed confidence through solid performances that prove age isn't a liability, while witnessing the rival dominate with increasingly aggressive and calculated tactics that seem designed to intimidate‚Äîculminating in a tense moment between them where the protagonist realizes their former prot√©g√© has evolved beyond the teachings they once imparted, adding a bittersweet layer to their rivalry.
    - The protagonist enters the track for their qualifying heat, initially fighting instinctive hesitation at the starting line‚Äîyears of self-doubt threatening to sabotage them before they even begin; but once the gate drops, muscle memory and hard-won technique flow through them as they navigate the track with precision, hitting their mark on a crucial turn that had haunted them since the regional qualifier, their lap culminating in a time that shocks the commentators into stunned recognition and sends the crowd to their feet‚Äîa moment where external validation finally aligns with internal capability, cracking through the psychological weight they've been carrying.
      - As the protagonist approaches the starting line, their hands grip the handlebars tighter than necessary; breathing becomes shallow as muscle memory from past failures tries to reassert control, but they consciously ground themselves, recalling the mental training regimen they've been practicing.
      - The gate drops and they explode forward; the first section of track is executed flawlessly, each body position and throttle input a product of weeks of physical training, suggesting to themselves and the gathered crowd that age might not be the liability everyone assumed.
      - At the mid-track turn‚Äîthe exact same corner where they lost control and crashed at the regional qualifier‚Äîthey hit the apex perfectly, their line smoothing out with practiced grace; they can feel the bike respond exactly as intended, and for the first time in months, the old muscle memory feels reliable rather than like a ghost haunting them.
      - The final straightaway arrives and they push harder, risk management giving way to controlled aggression; their body has endured, their technique has held, and the bike is responding with the responsiveness of their best seasons.
      - They cross the finish line and immediately sense something is different‚Äîthe timing screen flashes a number that's competitive, genuinely competitive, not a valiant effort but an actual threat in the field.
      - The pit crew erupts, their chief mechanic pumping a fist in recognition; sponsors suddenly lean forward with renewed interest; media is already preparing follow-up questions.
      - The crowd's roar builds as replays flash on the jumbotron, slow-motion footage of their flawless line; strangers in the stands are high-fiving, people are chanting their name, and for a moment, the protagonist allows themselves to believe: the setback didn't define them, and they might actually belong here.
    - Backstage between heats, a media scrum corners the protagonist‚Äîaggressive questions about their age, whispered doubts whether this is a genuine comeback or a desperate final gasp‚Äîwhile a key sponsor hovers nearby, visibly weighing whether to continue their support; the protagonist must navigate their authentic feelings of vulnerability against the need to project confidence, all while catching glimpses of how the rival handles similar scrutiny with dismissive ease.
      - A veteran motorsports journalist asks a deliberately provocative question about whether 'guys your age belong on a track this competitive,' implying the protagonist is reckless or delusional.
      - The protagonist feels a familiar hot flash of defensiveness but pauses‚Äîrecognizing this is exactly the moment their mental discipline is being tested; they choose a measured response that's honest without being desperate.
      - A social media influencer asks about the strained relationship with their family member/close friend mentioned earlier, forcing the protagonist to confront publicly what they've been avoiding privately.
      - The protagonist's longtime sponsor, watching from the edge of the crowd, exchanges a meaningful look‚Äîtheir body language signals uncertainty, and the protagonist realizes their performance in the next heat could determine whether the sponsorship survives.
      - Nearby, the rival is being interviewed by a different outlet; they answer with cocky brevity and swaggering body language, making it appear effortless‚Äîa stark contrast to the protagonist's visible struggle to maintain composure.
      - An older journalist, someone who covered the protagonist's glory days, asks a gentler question that unexpectedly validates the protagonist's journey, reminding them that skeptics have always existed; this moment of grace steadies their resolve.
    - The rival storms into their heat with aggressive intensity; on the opening lap, they execute a dangerously tight line through the technical section the protagonist always preached against‚Äîa move that generates roars from the crowd but draws concerned shouts from pit crew and safety officials. As the heat unfolds, their explosive speed and fearless commitment to high-risk lines accumulate lap after lap, ultimately posting the fastest time of the day by a significant margin. The rival's riding style carries an edge of recklessness, almost contemptuous‚Äîless about mastering the course and more about conquering it through sheer audacity‚Äîrevealing a fundamental shift in philosophy from what the protagonist once taught.
      - The rival enters their heat with visible tension in their jaw and shoulders, gripping their handlebars tightly during the pre-race ritual‚Äîa small tell that suggests they're not just confident but grimly determined to send a message.
      - On the opening lap, the rival takes an impossibly tight line through the 'Devil's Elbow,' a technical section where the protagonist had always advocated for smooth, measured braking and a wider apex; the rival instead accelerates into it late, testing the edge of the tire's grip, forcing their bike into a near-sideways angle.
      - The crowd erupts as the rival narrowly avoids catastrophe through sheer commitment, and commentators begin breathlessly narrating their performance with hyperbolic language‚Äî'absolute insanity,' 'pure aggression'‚Äîbuilding a legend in real time.
      - A safety official on the pit radio flags the maneuver as 'reckless' and 'borderline dangerous,' but the rival's team responds with confidence, clearly having rehearsed this calculated risk during practice sessions.
      - Lap by lap, the rival extends their lead, mixing moments of surgical precision with moments of edge-of-the-seat gambling, creating a riding style that feels almost performative‚Äîas if they're not just racing against the course but against an invisible audience.
      - The protagonist watches from the pit area, their jaw tightening as they recognize the technical skill beneath the aggression, but also notice something unsettling: the rival is taking risks the protagonist would have explicitly warned against, suggesting either blind ambition, a desire to prove something beyond winning, or a deeper resentment that's bleeding into their competitive mindset.
      - By the final lap, the rival posts a time that's nearly two full seconds ahead of the day's previous best, an almost insurmountable margin that draws a standing ovation and immediate replay analysis from the media.
      - As the rival dismounts their bike, they briefly lock eyes with their team, and the protagonist catches a glimpse of something raw and hungry in their expression‚Äînot just the satisfaction of victory, but the primal satisfaction of having proven something, perhaps dominance over their former mentor's methods.
    - Watching from the pit area, the protagonist studies the rival's heat with technical scrutiny‚Äîuntil a single corner midway through the track arrests their attention. The rival executes a radical late-apex turn through a technical section, banking deeper than the line the protagonist once taught them, carrying impossible speed through the apex before an explosive acceleration out. The protagonist's hands grip the pit fence. In that moment, they recognize the architecture of their old teachings beneath the maneuver‚Äîthe core philosophy intact‚Äîbut refined, synthesized with something entirely foreign. The realization lands like a physical blow: the rival hasn't rejected their mentorship; they've transcended it. The protagonist sees, with crystal clarity, that their former prot√©g√© is no longer the hungry student trying to match their teacher‚Äîthey've become a peer, perhaps already a superior craftsman. Pride and obsolescence war in their chest, and they understand that this rivalry has fundamentally shifted. This isn't about proving the student wrong anymore; it's about proving the teacher still belongs in the same frame at all.
    - As both riders prepare for the semi-final heats, they inevitably cross paths in the paddock‚Äîa bottleneck near the fuel station and equipment racks. The protagonist sees the rival first, dirt still clinging to their gear from the explosive heat they just finished. Their eyes meet for a fraction too long to be accidental. The rival's jaw tightens, and then a smile curls at the corner of their mouth‚Äînot quite a grin, something more calculated. They offer a slow, deliberate nod, almost a bow of sorts, a gesture loaded with unspoken meaning: *I learned everything you taught me, and I've become something even better.* But in that same moment, the protagonist catches something else‚Äîa flicker of uncertainty in the rival's eyes, quickly masked, a hint that beneath the swagger lies the weight of proving themselves against their former teacher. The nod hangs between them, unanswered, and as the rival turns to leave, there's a barely perceptible hesitation in their step, as if they're unsure whether the protagonist will respond. The protagonist doesn't‚Äîthey simply hold the rival's gaze a moment longer, and nod back, a gesture that somehow encompasses both acknowledgment and an unspoken question: *What will you do when it matters most?*
    - The protagonist's semi-final heat is strong but strategically run‚Äîthey resist the temptation to chase the rival's breakneck pace, instead riding with calculated precision and trusting the techniques they once preached to their prot√©g√©, ultimately finishing second but advancing to the final with their body intact and their mind sharper than ever. In the pit afterward, the protagonist catches their rival watching them with an expression that mingles grudging recognition with something closer to anger‚Äîthe prot√©g√© realizes their former mentor is no longer the hungry competitor chasing every gap, but something more dangerous: a rider who knows exactly what they're capable of and refuses to be baited into unnecessary risk.
      - As the semi-final begins, the protagonist feels the physical strain immediately‚Äîtheir legs are burning from the qualifying rounds, and their shoulder (a lingering injury from the initial qualifier loss) throbs with each aggressive maneuver; they make a conscious choice to preserve energy rather than match the rival's explosive early assault.
      - The rival hits the first set of jumps with reckless speed, but the protagonist takes the same section with textbook form, shaving a tenth of a second while keeping their heart rate sustainable‚Äîthe crowd misses the tactical brilliance, seeing only the safer line as timid.
      - Midway through the heat, the protagonist experiments with a line they haven't tried in practice‚Äîa modification to brake point and apex that their aging reflexes hesitate on for a split second, then execute with surprising fluidity; it's a moment where experience and neurological plasticity align perfectly.
      - The rival maintains their lead but the protagonist notices the distance isn't widening anymore; instead of panicking, the protagonist settles into a rhythm, lap after lap closing incrementally, never committing to the edge of disaster.
      - In the final laps, the rival begins to show fatigue‚Äîthey're holding the accelerator longer, committing harder to maintain their margin, burning fuel reserves that should be reserved for the championship final; the protagonist, reading the signs, eases off slightly, ensuring they'll have something left.
      - As they cross the finish line in second place, the protagonist feels not disappointment but a strange clarity‚Äîthis was the right race to run, and they proved something to themselves about wisdom versus hunger.
      - Back in the pit area, the protagonist removes their helmet and glances toward the rival's pit crew; the rival is staring directly at them, chest heaving, visibly frustrated; when their eyes meet, the rival's expression hardens into something between resentment and reluctant respect‚Äîthey've just realized their former mentor is no longer trying to beat them through pure speed, but through understanding the sport at a deeper level than aggression alone can achieve.
    - The rival wins their semi-final heat with another aggressive display, but this time the protagonist notices a telling falter on the second lap‚Äîa microsecond hesitation on the approach to the turn that their former prot√©g√© always nailed‚Äîbefore recovering with a touch too much throttle, overcompensating. The protagonist recognizes this as the mark of a rider fighting doubt, and in that instant, the dynamic shifts: the invincible rival becomes human, fallible, and perhaps as burdened by pressure as the protagonist. The realization hits like a revelation‚Äîthe prot√©g√©'s aggression and calculated tactics may not be signs of dominance, but of desperation to maintain superiority.
  - In the final championship heat, the protagonist finds themselves trailing their rival through the most demanding section of the track; as desperation and instinct collide, they recognize an opportunity‚Äîa tighter, more aggressive line through a treacherous turn that could narrow the gap. Despite knowing their aging body has limits, and with the memory of their earlier humiliation burning fresh, the protagonist commits to the riskier trajectory, driven by a need to prove they haven't lost their edge and to reclaim dominance over the rider they once taught.
    - As the final heat begins, the protagonist is immediately struck by the rival's refined technique‚Äîa near-perfect execution of the protagonist's own signature moves, particularly in the opening series of berms‚Äîand realizes with a jolt of complicated pride and dread that they're not just racing a competitor, but facing a living embodiment of their own legacy, executed with a hunger and precision that even surpasses their own aging body's capability.
      - The first two heats of the race see the protagonist and rival running close; the protagonist tests the water with their signature line through the opening berms‚Äîa technique that was decades ahead of its time‚Äîand watches in real-time as their rival mirrors it, foot-perfect, with the added arrogance of a slight acceleration at the exit.
      - The protagonist feels a sharp twist of dual emotion: genuine pride at seeing their teachings so thoroughly internalized, immediately tempered by the horrifying realization that their rival has had *years* to perfect and potentially improve upon these techniques, while the protagonist's body has been aging.
      - In the third lap, the rival executes a variation on one of the protagonist's textbook moves‚Äîa late apex through turn seven that the protagonist invented but never had quite the throttle control at speed to nail consistently‚Äîand nails it, leaving the protagonist in their dust.
      - The protagonist catches themselves almost nodding in grudging respect before catching their reflection in their peripheral mind's eye: here they are, watching their own student execute their own playbook better than they ever could, on the biggest stage, with the world watching.
    - Midway through the race, the rival edges into a commanding lead, exploiting a technical section of track where youth and raw speed allow for tighter exits and faster acceleration; the protagonist's aging body protests‚Äîold injuries flare with each impact, their breathing labored, their lines marginally wider and slower. The crowd's roar, once directed at the protagonist, now surges toward the younger rider; cheers thin to scattered pockets as camera focus shifts. The protagonist catches glimpses in their peripheral vision: the rival's bike geometry is cleaner through the high-speed turns, their posture more economical. Trailing in the dust and losing ground, the protagonist confronts an unwelcome thought‚Äînot new, but sharper now‚Äîthat perhaps their body has finally cashed in on years of punishment, and they truly don't belong in this race anymore.
      - The protagonist notices the rival executing a textbook line through the section‚Äîone the protagonist taught them years ago‚Äîperfected and refined to near-mechanical precision, which is both a source of perverse pride and a bitter reminder that the student has surpassed the teacher.
      - Physical pain becomes undeniable: an old shoulder injury throbs with each downshift, the protagonist's throttle hand trembles slightly from fatigue, and they're forced to modulate their aggression in ways their younger self never had to consider.
      - The crowd energy shift is visceral‚Äîthe protagonist hears the distinct pitch change in the roar, sees pit crew members on the rival's team jumping and cheering, while their own crew's body language tightens with concern.
      - As the protagonist drifts slightly wide through a corner, fighting for traction, they have a sharp, unwanted moment of clarity: if they cannot close this gap on a technical section, they have no path to victory, and the humiliation from the regional qualifier will be eclipsed by an even more public failure.
      - The rival, sensing the dominant position, begins to ride with visible confidence‚Äîlooser, more fluid‚Äîwhich paradoxically makes them faster, creating a psychological gap that mirrors the physical one on the track.
    - As the protagonist leans hard into the track's most notorious turn‚Äîa long, steeply banked section taken at nearly 60 mph where line choice separates podium finishers from also-rans‚Äîthey feel the bike's rear wheel searching for grip at the edge of adhesion. In this fraction of a second, a familiar instinct fires: they recognize the optimal late-apex trajectory their rival is running, the one they themselves perfected and taught years ago. But beneath that standard line, born from their decades of track experience and knowledge of this circuit's unique surface deterioration, they sense something more: a tighter, earlier-entry path through the inside edge of the turn that would require absolute precision and faith in their reflexes. It's a line they've attempted before in practice, never in competition‚Äîone that shaves critical tenths but demands flawless execution through a series of rapid micro-corrections. The trade-off is unforgiving: maintain perfect throttle control and trust their aging body to manage the intense lateral g-forces, or stick with the safe rhythm they've proven they can execute. As the turn rushes toward them, every nerve in their body fires with both possibility and peril.
    - For a heartbeat, the protagonist's hands tighten on the throttle‚Äîmuscle memory warring with mortality‚Äîas their body rebels against the commitment their mind is urging. They feel every past injury singing in their joints, the phantom ache of a shoulder that's never fully healed, and in that moment of hesitation, they catch a glimpse of their [family member name] in the grandstand, knuckles white around the rail, their face etched with worry rather than hope. And the protagonist realizes with crystalline clarity that this person chose to be here despite months of canceled dinners, missed conversations, and the growing distance between them‚Äîchosen to witness this moment. The protagonist is seized by a question that cuts deeper than any technical consideration: *Is reclaiming your legacy worth losing the person who always believed you had one?* The bike seems to slow, as if the world itself is offering them an exit, a graceful way to back off, to be the wise veteran rather than the desperate gambler.
      - The protagonist's physical awareness sharpens: they feel their heart rate spiking, their breathing shallow, the bike's vibration traveling through tired muscles and old scars‚Äîeach sensation a whisper of their body's limits.
      - Their eyes lock on the strained family member in the stands for just a fraction of a second‚Äîperhaps a spouse or adult child‚Äîand they see worry etched into their posture in a way that cuts deeper than any rival's smirk.
      - A flash of memory intrudes: recent moments of conflict at home, the family member asking 'Is this really about proving something to the world, or proving something to yourself?'‚Äîwords the protagonist has been unable to answer.
      - The protagonist's mind bifurcates: part of them calculates the risk (a mistake here means injury, possibly career-ending or worse), while another part hears the crowd's roar and feels the old hunger clawing at their chest.
      - They sense the older, wiser version of themselves‚Äîthe one who mentored their rival with patience and philosophy‚Äîlooking on in judgment, asking silently: 'Is this how you want to be remembered? As the one who couldn't let go?'
      - But beneath that hesitation, pride and ego coil tighter, whispering a different story: 'If you pull back now, you've already lost‚Äînot to your rival, but to time, to age, to fear.'
    - As the turn approaches, the protagonist catches the rival's razor-thin smile‚Äîa micro-expression of supreme confidence born from months of media dismissal and trash talk‚Äîand a specific memory surfaces: an interview where the rival claimed they'd "learned everything useful" from their mentor, then had to "actually learn how to win"; the words that stung most at the time now ignite something primal. In that same breath, the protagonist hears their own voice echoing from years ago, speaking to their younger self at the very podium where they first mentored this same rival: "The only limits are the ones you accept." They realize in a flash that they taught this philosophy to someone who used it to transcend them, and now that same mantra has become the justification they need‚Äîthe permission slip‚Äîto prove the philosophy still belongs to them.
      - The protagonist glimpses the rival's micro-expression of supreme confidence‚Äîa slight, almost imperceptible smile‚Äîwhich crystallizes weeks of accumulated psychological warfare and public dismissals into a single, potent image
      - A specific memory surfaces: a post-race interview where the rival claimed to have "learned everything worth learning" from their mentor, then pointedly added they'd "had to actually learn how to win"‚Äîa statement that wounded deeply and has replayed in the protagonist's mind ever since
      - The protagonist recalls the exact moment and place they first taught this philosophy: standing at the same championship podium years earlier, telling their young prot√©g√©, "The only limits are the ones you accept," watching the phrase take root in hungry, ambitious eyes
      - A bittersweet realization hits: they taught this rider to transcend boundaries, and now that same philosophy has been used against them‚Äîtheir legacy has become the weapon aimed at their downfall
      - In the present moment, the protagonist's internal conflict crystallizes: they can invoke the mantra as pure philosophy, or as a dangerous rationalization for ego-driven recklessness, and they no longer care which it is
      - They feel the weight of reclaiming ownership of their own philosophy‚Äîthe need to prove that the words still belong to them, that they haven't become a cautionary tale of a teacher surpassed by their student
    - The protagonist downshifts hard, feeling the engine's resistance against their intent, then leans into the bike with a commitment that borders on recklessness‚Äîbody weight forward, trust absolute‚Äîand twists the throttle wide open into the tighter, more dangerous line, crossing a threshold of no return in a decision born equally of tactical precision and emotional desperation, where calculated mastery and dangerous pride become indistinguishable.
      - The protagonist's hands mechanically execute the downshift, a motion so ingrained from decades of racing that their conscious mind is free to scream objections even as their body commits; for an instant, they feel the rebellion‚Äîthe slight resistance of their aging wrists against the aggression they're demanding.
      - Their eyes lock onto the tighter racing line ahead, measuring it with the precision only experience can provide, but their body is trembling with adrenaline and fear‚Äîthe dual sensations amplifying each other until they become indistinguishable from focus.
      - As they lean the bike deeper into the turn, the margin for error shrinks to inches; they think of the crash that ended their mentor years ago, the rider who took the same kind of risk and paid the ultimate price, and for one suspended moment they could pull back, brake, play it safe.
      - The rival remains ahead, unaware of the protagonist's gambit, riding the 'correct' line with textbook confidence‚Äîand seeing that unshakeable belief in the rival's body language, the protagonist feels something snap inside them: a refusal to lose to a rider who learned everything from them.
      - They twist the throttle open with a finality that feels like a scream, committing fully to the line; there is no correcting this decision, no gentle recovery if they've misjudged‚Äîonly success or a catastrophic washout; in that instant of commitment, the protagonist stops calculating and simply surrenders to their instinct and their pride, experiencing a strange calm as fear and determination fuse into absolute presence.
  - During the final championship heat, the protagonist pushes hard on the risky line but loses traction mid-turn, sending both rider and bike into a violent, slow-motion tumble; stunned and injured, they face a choice between limping off or remounting; they remount despite pain, losing multiple positions and seemingly out of contention; through sheer will and tactical precision, they steadily work their way back up the field, nearly catching the rival in the final laps; though falling just short of victory, their crash-and-comeback performance becomes the defining image of the race, embodying the resilience and fighting spirit their rival once learned from them.
  - In the aftermath of the race, the protagonist grapples with bittersweet emotions as they realize true redemption wasn't about winning, but about reclaiming their identity as a racer and proving their resilience to themselves. When the rival encounters them in the pit area, a tense moment unfolds‚Äîone filled with acknowledgment rather than animosity‚Äîbefore the rival offers a gesture of respect that signals the wounds between them may finally be healing. Meanwhile, the strained personal relationship resurfaces as loved ones embrace them, forcing a reckoning about what obsession cost them and what recovery might look like moving forward.
    - Immediately after remounting and crossing the finish line with a shattered bike and torn body, the protagonist rolls into the cooling zone where their team rushes to meet them; as they remove their helmet and breathe in real air for the first time, the full weight of what just happened crashes over them‚Äîthe adrenaline fades, the crowd noise becomes muted, and they realize with startling clarity that they didn't just survive the crash, they *thrived* in its aftermath, proving to themselves that age, doubt, and physical pain couldn't keep them from the line, and that the competitor inside them is still alive and unbroken.
      - As the protagonist coasts toward the pit area, their hands are trembling on the handlebars‚Äînot from fear or exhaustion, but from a surge of adrenaline mixed with disbelief; they can barely comprehend that they stayed on the bike after such an impact, let alone pushed it back into a competitive line.
      - The moment they remove their helmet and gulp fresh air, their vision swims slightly‚Äîthey taste blood and dirt, feel the burn of road rash across their shoulder, and their ribs scream with each breath, grounding them in the reality of what their body just endured.
      - Their crew approaches with concern written across their faces, expecting trauma or despair, but the protagonist's eyes are wide and wet, locked on the horizon where they just crossed the finish line; they're not crying from defeat but from the overwhelming recognition that they *chose* to get back up when every instinct screamed to stay down.
      - In that moment, a cascade of competing emotions hits them: relief (they didn't wreck out completely), pride (they remounted without hesitation), and a profound shift in self-perception‚Äîthey came to this race seeking external validation and somehow, mid-crash, that changed; now they're tasting something more honest: the undeniable proof that they're still a racer at their core, not a washed-up relic clinging to past glory.
      - A crew member grabs their arm to steady them, concerned they might collapse, and the physical contact seems to trigger something deeper; the protagonist's shoulders shake as the dam breaks‚Äînot theatrical or performative, but a raw release of months of self-doubt, fear, and the crushing weight of thinking they were finished.
    - In the medical tent, as trainers check for fractures and scrapes, the protagonist's hands won't stop shaking‚Äînot from pain or fear, but from the raw electricity still coursing through their body. A trainer asks where it hurts, but the protagonist barely hears them, too aware of their own breathing, their own heartbeat, the feel of dirt still embedded in their skin. When they catch their reflection in a nearby mirror, they expect to see the washed-up veteran they've been terrified of becoming. Instead, they see someone who just pushed a machine and a body to the edge and came back. The specific realization isn't grandiose: they didn't win; they know that. But sitting there, battered and alive, they understand with sudden clarity that somewhere between the starting line and the crash and the remount, they stopped racing to prove something to sponsors or competitors or the world. They were just *racing*‚Äîbecause that's what racers do, because they couldn't not do it, because the track is where they're most themselves. Everything else‚Äîthe redemption, the reputation, the sponsorship‚Äîthose were anchors they carried with them. But they just proved, in the most brutal way possible, that the racer was never gone. It was buried, maybe, but not gone.
    - The rival approaches the pit area and, spotting the protagonist still sitting in the medical tent, cuts through the post-race chaos with deliberate purpose. Their eyes lock across the crowded space‚Äîa moment of recognition that stops both of them cold. The rival's face is flushed from exertion, sweat-slicked helmet in hand, and there's a visible war playing out behind their eyes: the sting of finishing second against something else entirely‚Äîa grudging acknowledgment of what they just witnessed. The protagonist, muddy and trembling from adrenaline crash, meets the rival's gaze without looking away; in that suspended moment, years of mentorship-turned-betrayal, rivalry, and carefully constructed resentment hang between them like a physical thing, but so does something unexpected: a flicker of mutual understanding, two riders who pushed past their limits and lived to see it.
      - The rival makes their way through the post-race pit chaos‚Äîcongratulations from their team, media requests for interviews‚Äîbut their focus narrows entirely on the protagonist in the medical tent, suggesting this encounter matters more than basking in second place.
      - Their eyes meet across the crowded space for the first time since the race ended; the rival has their helmet tucked under one arm, still in full gear, still radiating the intensity of competition.
      - The protagonist is visibly vulnerable: muddy, breathing heavily, slumped slightly as the medical crew check them for injuries; they look diminished physically, but there's something in their posture that reads as unbroken.
      - A flicker of confusion crosses the rival's face‚Äîthey expected to feel triumph seeing their former mentor in this state, but instead they're struck by the memory of what they just watched: the crash, the remount, the desperate heart on that track.
      - The protagonist meets the rival's gaze steadily, too exhausted to perform their usual bravado; there's no defensive posture, no ego-driven aggression‚Äîjust two people who understand the cost of pushing a motorcycle and a body to the breaking point.
      - In that beat of eye contact, the familiar anger and resentment are still there, but they're layered with something neither rider expected: recognition that the person in front of them‚Äîscarred, aging, still hungry‚Äîisn't the untouchable mentor anymore, but a fellow competitor with something to prove.
      - The rival hesitates at the edge of the medical tent, wrestling with whether to cross that threshold; the choice to move forward is a small rebellion against years of calculated distance.
    - The rival approaches the protagonist in the pit area, visibly wound-up from the adrenaline of their second-place finish, and after a moment of charged silence, offers a grudging compliment about the protagonist's remount‚Äîspecifically about how they executed the same high-risk line the protagonist had taught them years ago, but with a raw desperation and grit that even surpassed technical perfection. The rival's words reveal layers of conflicted emotion: admiration for the protagonist's refusal to quit, frustration that their former mentor still possesses that indefinable fire, and an unspoken acknowledgment that this moment‚Äîthe protagonist's comeback crash and remount‚Äîmight matter more to their journey than the rival's own second-place podium finish.
      - The rival strides into the pit area, helmet under one arm, adrenaline still coursing through them; they spot the protagonist being examined by medical staff and hesitate, wrestling internally between walking past or confronting the moment.
      - The rival closes the distance, and for a beat, neither speaks‚Äîjust the ambient noise of the track, crew chatter, and distant crowd. The protagonist looks up, and there's a flicker of wariness in their eyes, old resentment hovering between them.
      - The rival's jaw tightens as they process what they just witnessed: their former mentor remounting after a catastrophic crash and riding through pain and injury to cross the finish line. It's the move the rival learned years ago, but executed with a desperation the rival‚Äîdespite their hunger and speed‚Äîhasn't yet needed to summon.
      - The rival breaks the silence by referencing the specific technique: 'That line back at turn five... you taught me that move.' There's no praise in the tone, just observation, but underneath is an admission: they recognize themselves in what the protagonist just did.
      - The rival continues, their voice quieter: 'I rode it faster today. But I didn't ride it like that.' The 'like that' carries weight‚Äîacknowledging the combination of skill, fear, and refusal to break that defined the protagonist's remount.
      - The protagonist, still catching their breath and absorbing the pain, meets the rival's eyes and sees something unexpected: not victory, not vindication, but a mirror. The rival is talented enough to be dangerous, but young enough to still be learning what true survival looks like.
      - For a moment, both riders exist in a shared understanding of what it costs to love this sport enough to destroy yourself for it. The rivalry hasn't disappeared, but it's been recalibrated by this moment of mutual, grudging recognition.
    - The protagonist responds not with bravado but with genuine acknowledgment: noticing how the rival executed a signature technique with precision and heart‚Äîa move the protagonist taught them years ago‚Äîthe protagonist sees reflected in their prot√©g√©'s aggressive style all the hunger and determination they instilled, now refined into something formidable. With a nod and measured words, the protagonist admits they pushed harder than they expected to, but so did the rival; and that hunger, that refusal to quit, is exactly what the protagonist taught them to have. The moment is bittersweet‚Äîan admission that the rival has surpassed them, but also a quiet pride that their mentorship created something exceptional, even if it was channeled through defiance and desire to prove the teacher wrong.
    - In a raw, unguarded moment in the pit area, the protagonist and rival drop their competitive armor‚Äîthe rival admits they watched the remount and recognized the exact desperation-fueled technique the protagonist taught them years ago, executed now with a rawness that transcended ego. The protagonist, breathless and humbled, acknowledges that they see how the rival has exceeded them, and that watching the younger rider push beyond their teachings is exactly what a true mentor hopes to witness. The rival, struck by this genuine pride rather than defensiveness, extends a hand‚Äînot in victory, but in recognition. This exchange signals that their fractured mentor-mentee bond, though still tender, is beginning to heal through mutual vulnerability and the shared understanding that the drive to be great can create both enemies and unexpected allies.
    - Later, as the protagonist exits the medical tent with fresh bandages, they spot their estranged daughter/best friend/aging parent in the crowd‚Äîthe one they've been avoiding calls from for months. When their eyes meet, the protagonist instinctively wants to deflect with triumph about the race, but the loved one's expression‚Äîa mixture of relief, exhaustion, and barely concealed hurt‚Äîstops them cold. There's an awkward beat where neither moves, then the loved one steps closer and quietly lists the cost: the missed school recital, the cancelled promise to help move, the birthday dinner where the protagonist called mid-celebration to replay race footage, the weeks of one-word texts and broken plans. The protagonist's first instinct is to defend themselves ("I was preparing," "I had to focus"), but as they see the hurt in the loved one's eyes, the weight of those excuses crumbles. For the first time, the protagonist sits with the uncomfortable truth that redemption at the track doesn't erase redemption owed at home.
      - The loved one appears in the crowd‚Äîwhether daughter, closest friend, or aging parent‚Äîand the protagonist's first instinct is to hide their injuries and present a version of themselves that won the day, a reflex born from months of avoiding difficult conversations.
      - The moment their eyes meet, the protagonist realizes this person has been watching from the stands the whole time, creating an internal collision of shame and hope‚Äîshame for having ignored their calls, hope that maybe witnessing the race might explain everything.
      - The loved one breaks the silence with quiet specificity: they recount not just abstract hurt, but concrete moments‚Äîa child's school play the protagonist missed because of early morning training, a holiday dinner interrupted by a sponsor call, promises of 'next month' or 'after the regional qualifier' that never materialized.
      - The protagonist's first response is defensive‚Äîa litany of explanations about sacrifice, commitment, and what it takes to compete at this level‚Äîbut their voice wavers as they hear how hollow the justifications sound.
      - The loved one, wounded but not cruel, holds up a hand and asks the hardest question: 'Did any of it matter if you didn't have anyone to share it with?' The protagonist has no answer.
      - In the silence that follows, the protagonist experiences a moment of true reckoning: the crash on the track was visible and survivable, but the crash in their personal life has been ongoing and unaddressed.
      - The loved one softens slightly, acknowledging that they see the protagonist's struggle and perhaps even respects the determination, but establishes a boundary: 'I can't keep being left behind while you figure out who you are. I need to know if I matter to you.'
      - The protagonist, still in shock and emotionally raw from the race, admits they don't have all the answers yet, but for the first time, the focus shifts from what they need to prove to themselves to what needs to be rebuilt with the people who matter most.
    - The protagonist admits they still need the sport, but realizes that redemption isn't about erasing the fall or proving something to the world‚Äîit's about integrating all versions of themselves: the mentor who believed in possibility, the competitor who needed to prove their worth, the vulnerable person who crashed, and the resilient one who remounted. They acknowledge the cost this integration demands: honesty about their limits, investment in the relationships they've neglected, and acceptance that the next chapter of their racing career‚Äîif there is one‚Äîmust coexist with these other identities, not consume them.
      - The protagonist sits alone (or with the loved one) and explicitly articulates each version of themselves: naming the mentor who once mentored with wisdom, the ego-driven competitor who needed external validation, the broken person who feared they were finished, and the stubborn fighter who refused to stay down‚Äîrecognizing each was real, necessary, and incomplete on its own.
      - The protagonist grapples with a hard truth: by focusing only on the competitor version for so long, they abandoned the mentor and erased the vulnerability, which poisoned their relationship with both the rival and their loved ones.
      - They vocalize a specific sacrifice or broken promise to the loved one, not as excuse but as acknowledgment‚Äîcreating an opening for the conversation about what balance might look like moving forward.
      - The protagonist expresses their continued need for racing, but reframes it: not as an escape or a way to outrun their demons, but as a place where they can test themselves and stay alive‚Äîsomething they're willing to pursue only if they can do it honestly and without sacrificing the people who matter.
      - A moment where the protagonist imagines (or discusses) what the next phase of their relationship with the rival could be: mentoring again, perhaps, but as equals and learning partners rather than as proof of superiority; or simply as two riders who respect each other's journey.
      - The protagonist accepts a concrete next step‚Äîwhether it's scheduling time with the loved one, having a follow-up conversation with the rival, or making a decision about whether they'll pursue racing at this level again‚Äîthat signals they're beginning to act on this integrated understanding rather than just philosophizing about it.
    - The story closes with the protagonist stepping away from the championship podium and trophy presentation, choosing instead to find the rival in the garage and suggest a future mentorship‚Äîthis time built on mutual respect and honesty rather than ego. As they walk together through the pits, their loved one joins them, and the protagonist extends a genuine invitation to be part of their life again, acknowledging that the real victory is learning to want both the sport and the people who matter. In the final image, the protagonist sits on their bike at the edge of the track as sunset paints the sky‚Äîscarred but present, no longer running from themselves or toward something just out of reach.
      - The protagonist stands near the podium as awards are being distributed, but feels a pull away from the spectacle‚Äîthey don't climb the steps, they walk off the track toward the garage.
      - They find their rival in the garage, still in gear, cooling down from the adrenaline of second place; there's a moment of mutual recognition that both of them left everything on the track.
      - The protagonist makes a vulnerable offer: to help the rival grow as a racer and as a mentor to the next generation, doing it 'the right way' this time‚Äîwithout the bitterness, without the pressure to break them.
      - The rival accepts, perhaps with a smile that suggests they're ready to move beyond the old rivalry; they acknowledge that being pushed by the protagonist, even now, matters.
      - As the two riders walk through the pits together, the protagonist's loved one appears in the distance, uncertainty written across their face‚Äîunsure if they're still unwanted.
      - The protagonist calls them over and introduces them to the rival, then tells the loved one directly: 'I can't promise I won't still love this sport more than anything else, but I can promise not to shut you out while I'm chasing it.'
      - This moment isn't a complete healing‚Äîit's fragile and real‚Äîbut it signals the beginning of something different, more honest than the obsessive devotion that came before.
      - In the final scene, after the crowds disperse, the protagonist walks their bike to the edge of the track and sits on it as the sun dips toward the horizon; the track is quiet now, just them and the dirt.
      - They look out at the empty course, not as a battlefield to conquer, but as home‚Äîa place they can return to, again and again, without it having to validate or redeem them.
      - The camera pulls back to show them silhouetted against the sunset: a solitary figure who has learned to sit still with who they are, broken equipment and all.

Did a total of 76 extractions.</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>Author Commentary
</div>
</div>
<div class="callout-body-container callout-body">
<p>I can‚Äôt bring myself to read the whole thing above, but the parts I‚Äôve read are <em>cringeworthy</em> clich√©.</p>
<p>Still, the recursive generation is cool!</p>
</div>
</div>
</section>
</section>
<section id="other-references" class="level2">
<h2 class="anchored" data-anchor-id="other-references">Other References</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Lasagna Recursive Planning Agent (LRPA)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Another powerful example of recursive agents is the <a href="../recipes/lasagna_recursive_planning_agent.html">Lasagna Recursive Planning Agent (LRPA)</a>, so check that out too!</p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/lasagna-ai\.rhobota\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../agent_features/parallelizing.html" class="pagination-link" aria-label="Parallelizing">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Parallelizing</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../agent_features/caching.html" class="pagination-link" aria-label="Caching Decorator">
        <span class="nav-page-text">Caching Decorator</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright ¬© 2025 (<a href="https://github.com/Rhobota/lasagna-ai/blob/main/LICENSE.txt">MIT License</a>)</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.dev/Rhobota/lasagna-ai/blob/main/docs/agent_features/recursive_agent.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/Rhobota/lasagna-ai/blob/main/docs/agent_features/recursive_agent.ipynb" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/Rhobota/lasagna-ai/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>